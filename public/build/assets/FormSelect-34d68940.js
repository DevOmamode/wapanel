import{r as L,m as f,D as U,V as ne,q as K,G as X,I as G,F as Y,R as ie,S as re,H as I,W as ue,N as V,o as R,c as T,a as C,t as A,h as N,f as j,u as _,n as z,g as Z,b as E,Z as se,d as de,e as ve}from"./app-03263d9c.js";import"./index-17bda2d1.js";import{u as $,w as ce,h as pe,o as x,f as fe,K as be,a as me,H,g as ge,t as Q,i as xe,b as J,O as he,d as b}from"./hidden-d73b7354.js";import{x as ye,a as O,y as Oe,c as Se,l as F,p as we,b as ke,u as Re}from"./use-text-value-74ca2016.js";function ee(t={},i=null,l=[]){for(let[m,e]of Object.entries(t))ae(l,te(i,m),e);return l}function te(t,i){return t?t+"["+i+"]":i}function ae(t,i,l){if(Array.isArray(l))for(let[m,e]of l.entries())ae(t,te(i,m.toString()),e);else l instanceof Date?t.push([i,l.toISOString()]):typeof l=="boolean"?t.push([i,l?"1":"0"]):typeof l=="string"?t.push([i,l]):typeof l=="number"?t.push([i,`${l}`]):l==null?t.push([i,""]):ee(l,i,t)}function Le(t,i,l){let m=L(l==null?void 0:l.value),e=f(()=>t.value!==void 0);return[f(()=>e.value?t.value:m.value),function(p){return e.value||(m.value=p),i==null?void 0:i(p)}]}function Ve(t,i){return t===i}var Te=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Te||{}),Pe=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Pe||{}),Be=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Be||{});function Ce(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let le=Symbol("ListboxContext");function q(t){let i=ue(le,null);if(i===null){let l=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,q),l}return i}let $e=U({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ve},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:i,attrs:l,emit:m}){let e=L(1),p=L(null),d=L(null),g=L(null),v=L([]),a=L(""),o=L(null),S=L(1);function w(n=r=>r){let r=o.value!==null?v.value[o.value]:null,u=he(n(v.value.slice()),y=>x(y.dataRef.domRef)),c=r?u.indexOf(r):null;return c===-1&&(c=null),{options:u,activeOptionIndex:c}}let k=f(()=>t.multiple?1:0),[P,D]=Le(f(()=>t.modelValue),n=>m("update:modelValue",n),f(()=>t.defaultValue)),B=f(()=>P.value===void 0?$(k.value,{1:[],0:void 0}):P.value),s={listboxState:e,value:B,mode:k,compare(n,r){if(typeof t.by=="string"){let u=t.by;return(n==null?void 0:n[u])===(r==null?void 0:r[u])}return t.by(n,r)},orientation:f(()=>t.horizontal?"horizontal":"vertical"),labelRef:p,buttonRef:d,optionsRef:g,disabled:f(()=>t.disabled),options:v,searchQuery:a,activeOptionIndex:o,activationTrigger:S,closeListbox(){t.disabled||e.value!==1&&(e.value=1,o.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(n,r,u){if(t.disabled||e.value===1)return;let c=w(),y=ye(n===O.Specific?{focus:O.Specific,id:r}:{focus:n},{resolveItems:()=>c.options,resolveActiveIndex:()=>c.activeOptionIndex,resolveId:M=>M.id,resolveDisabled:M=>M.dataRef.disabled});a.value="",o.value=y,S.value=u??1,v.value=c.options},search(n){if(t.disabled||e.value===1)return;let r=a.value!==""?0:1;a.value+=n.toLowerCase();let u=(o.value!==null?v.value.slice(o.value+r).concat(v.value.slice(0,o.value+r)):v.value).find(y=>y.dataRef.textValue.startsWith(a.value)&&!y.dataRef.disabled),c=u?v.value.indexOf(u):-1;c===-1||c===o.value||(o.value=c,S.value=1)},clearSearch(){t.disabled||e.value!==1&&a.value!==""&&(a.value="")},registerOption(n,r){let u=w(c=>[...c,{id:n,dataRef:r}]);v.value=u.options,o.value=u.activeOptionIndex},unregisterOption(n){let r=w(u=>{let c=u.findIndex(y=>y.id===n);return c!==-1&&u.splice(c,1),u});v.value=r.options,o.value=r.activeOptionIndex,S.value=1},theirOnChange(n){t.disabled||D(n)},select(n){t.disabled||D($(k.value,{0:()=>n,1:()=>{let r=V(s.value.value).slice(),u=V(n),c=r.findIndex(y=>s.compare(u,V(y)));return c===-1?r.push(u):r.splice(c,1),r}}))}};Oe([d,g],(n,r)=>{var u;s.closeListbox(),ce(r,pe.Loose)||(n.preventDefault(),(u=x(d))==null||u.focus())},f(()=>e.value===0)),ne(le,s),Se(f(()=>$(e.value,{0:F.Open,1:F.Closed})));let h=f(()=>{var n;return(n=x(d))==null?void 0:n.closest("form")});return K(()=>{X([h],()=>{if(!h.value||t.defaultValue===void 0)return;function n(){s.theirOnChange(t.defaultValue)}return h.value.addEventListener("reset",n),()=>{var r;(r=h.value)==null||r.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,modelValue:r,disabled:u,form:c,...y}=t,M={open:e.value===0,disabled:u,value:B.value};return G(Y,[...n!=null&&B.value!=null?ee({[n]:B.value}).map(([W,oe])=>G(fe,be({features:me.Hidden,key:W,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:c,name:W,value:oe}))):[],H({ourProps:{},theirProps:{...l,...ge(y,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:M,slots:i,attrs:l,name:"Listbox"})])}}}),De=U({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${Q()}`}},setup(t,{attrs:i,slots:l,expose:m}){let e=q("ListboxButton");m({el:e.buttonRef,$el:e.buttonRef});function p(a){switch(a.key){case b.Space:case b.Enter:case b.ArrowDown:a.preventDefault(),e.openListbox(),I(()=>{var o;(o=x(e.optionsRef))==null||o.focus({preventScroll:!0}),e.value.value||e.goToOption(O.First)});break;case b.ArrowUp:a.preventDefault(),e.openListbox(),I(()=>{var o;(o=x(e.optionsRef))==null||o.focus({preventScroll:!0}),e.value.value||e.goToOption(O.Last)});break}}function d(a){switch(a.key){case b.Space:a.preventDefault();break}}function g(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),I(()=>{var o;return(o=x(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),Ce(()=>{var o;return(o=x(e.optionsRef))==null?void 0:o.focus({preventScroll:!0})})))}let v=xe(f(()=>({as:t.as,type:i.type})),e.buttonRef);return()=>{var a,o;let S={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:w,...k}=t,P={ref:e.buttonRef,id:w,type:v.value,"aria-haspopup":"listbox","aria-controls":(a=x(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(o=x(e.labelRef))==null?void 0:o.id,w].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:p,onKeyup:d,onClick:g};return H({ourProps:P,theirProps:k,slot:S,attrs:i,slots:l,name:"ListboxButton"})}}}),Ae=U({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${Q()}`}},setup(t,{attrs:i,slots:l,expose:m}){let e=q("ListboxOptions"),p=L(null);m({el:e.optionsRef,$el:e.optionsRef});function d(a){switch(p.value&&clearTimeout(p.value),a.key){case b.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case b.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let o=e.options.value[e.activeOptionIndex.value];e.select(o.dataRef.value)}e.mode.value===0&&(e.closeListbox(),I(()=>{var o;return(o=x(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}));break;case $(e.orientation.value,{vertical:b.ArrowDown,horizontal:b.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Next);case $(e.orientation.value,{vertical:b.ArrowUp,horizontal:b.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Previous);case b.Home:case b.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.First);case b.End:case b.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Last);case b.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),I(()=>{var o;return(o=x(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})});break;case b.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),p.value=setTimeout(()=>e.clearSearch(),350));break}}let g=we(),v=f(()=>g!==null?(g.value&F.Open)===F.Open:e.listboxState.value===0);return()=>{var a,o,S,w;let k={open:e.listboxState.value===0},{id:P,...D}=t,B={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(w=(o=x(e.labelRef))==null?void 0:o.id)!=null?w:(S=x(e.buttonRef))==null?void 0:S.id,"aria-orientation":e.orientation.value,id:P,onKeydown:d,role:"listbox",tabIndex:0,ref:e.optionsRef};return H({ourProps:B,theirProps:D,slot:k,attrs:i,slots:l,features:J.RenderStrategy|J.Static,visible:v.value,name:"ListboxOptions"})}}}),Ie=U({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${Q()}`}},setup(t,{slots:i,attrs:l,expose:m}){let e=q("ListboxOption"),p=L(null);m({el:p,$el:p});let d=f(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),g=f(()=>$(e.mode.value,{0:()=>e.compare(V(e.value.value),V(t.value)),1:()=>V(e.value.value).some(s=>e.compare(V(s),V(t.value)))})),v=f(()=>$(e.mode.value,{1:()=>{var s;let h=V(e.value.value);return((s=e.options.value.find(n=>h.some(r=>e.compare(V(r),V(n.dataRef.value)))))==null?void 0:s.id)===t.id},0:()=>g.value})),a=ke(p),o=f(()=>({disabled:t.disabled,value:t.value,get textValue(){return a()},domRef:p}));K(()=>e.registerOption(t.id,o)),ie(()=>e.unregisterOption(t.id)),K(()=>{X([e.listboxState,g],()=>{e.listboxState.value===0&&g.value&&$(e.mode.value,{1:()=>{v.value&&e.goToOption(O.Specific,t.id)},0:()=>{e.goToOption(O.Specific,t.id)}})},{immediate:!0})}),re(()=>{e.listboxState.value===0&&d.value&&e.activationTrigger.value!==0&&I(()=>{var s,h;return(h=(s=x(p))==null?void 0:s.scrollIntoView)==null?void 0:h.call(s,{block:"nearest"})})});function S(s){if(t.disabled)return s.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),I(()=>{var h;return(h=x(e.buttonRef))==null?void 0:h.focus({preventScroll:!0})}))}function w(){if(t.disabled)return e.goToOption(O.Nothing);e.goToOption(O.Specific,t.id)}let k=Re();function P(s){k.update(s)}function D(s){k.wasMoved(s)&&(t.disabled||d.value||e.goToOption(O.Specific,t.id,0))}function B(s){k.wasMoved(s)&&(t.disabled||d.value&&e.goToOption(O.Nothing))}return()=>{let{disabled:s}=t,h={active:d.value,selected:g.value,disabled:s},{id:n,value:r,disabled:u,...c}=t,y={id:n,ref:p,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":g.value,disabled:void 0,onClick:S,onFocus:w,onPointerenter:P,onMouseenter:P,onPointermove:D,onMousemove:D,onPointerleave:B,onMouseleave:B};return H({ourProps:y,theirProps:c,slot:h,attrs:l,slots:i,name:"ListboxOption"})}}});function Ne(t,i){return R(),T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[C("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})])}function _e(t,i){return R(),T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[C("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}const Me={for:"name",class:"block text-sm leading-6 text-gray-900"},je={class:""},ze={class:"relative"},Ee={key:0,class:"block truncate"},Fe={key:0},Ue={key:1,class:"text-gray-500"},He={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},qe={key:0},Ke={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600"},Qe={key:0,class:"form-error text-[#b91c1c] text-xs"},Xe={__name:"FormSelect",props:{options:Array,modelValue:[String,Number,Array],name:String,className:String,optionClassName:String,placeholder:{type:String,default:"Select option"},multiple:Boolean,required:Boolean,error:String,relativeFlag:Boolean,contactCount:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:i}){const l=t,m=i,e=f(()=>l.options.filter(d=>Array.isArray(l.modelValue)?l.modelValue.includes(d.value):l.modelValue===d.value).map(d=>d.label).join(", ")),p=f(()=>l.options.filter(d=>Array.isArray(l.modelValue)?l.modelValue.includes(d.value):l.modelValue===d.value).map(d=>d.contactCount).join(", "));return(d,g)=>(R(),T("div",{class:z(t.className)},[C("label",Me,A(t.name),1),C("div",je,[N(_($e),{multiple:l.multiple,"onUpdate:modelValue":g[0]||(g[0]=v=>m("update:modelValue",v)),"model-value":l.modelValue},{default:j(()=>[C("div",ze,[N(_(De),{class:z(["relative w-full cursor-default rounded-lg bg-white py-2 px-5 pr-10 shadow-sm text-left ring-1 ring-inset focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm",t.error?"ring-[#b91c1c]":"ring-gray-300"])},{default:j(()=>[e.value?(R(),T("span",Ee,[Z(A(e.value)+" ",1),p.value&&t.contactCount==!0?(R(),T("span",Fe,A("   ("+p.value+")"),1)):E("",!0)])):(R(),T("span",Ue,A(l.placeholder),1)),C("span",He,[N(_(_e),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1},8,["class"]),N(se,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:j(()=>[N(_(Ae),{class:z(["z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",[t.optionClassName,l.relativeFlag==!0?"relative":"absolute"]])},{default:j(()=>[(R(!0),T(Y,null,de(l.options,v=>(R(),ve(_(Ie),{key:v.label,value:v.value,as:"template"},{default:j(({active:a,selected:o})=>[C("li",{class:z([a?"bg-amber-100 text-amber-900":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[C("span",{class:z([o?"font-medium":"font-normal","block truncate"])},[Z(A(v.label),1),t.contactCount==!0?(R(),T("span",qe,A(v.contactCount?"   ("+v.contactCount+")":"   (0)"),1)):E("",!0)],2),o?(R(),T("span",Ke,[N(_(Ne),{class:"h-5 w-5","aria-hidden":"true"})])):E("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1},8,["class"])]),_:1})])]),_:1},8,["multiple","model-value"])]),t.error?(R(),T("div",Qe,A(t.error),1)):E("",!0)],2))}};export{Xe as _,Ne as a,Le as d,ee as e,_e as r};
