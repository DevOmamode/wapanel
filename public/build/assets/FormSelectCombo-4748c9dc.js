import{Q as N,G as $,X as B,Y as O,J as G}from"./combobox-7fa0f0b0.js";import{r as j,a as q}from"./FormSelect-34d68940.js";import{r as w,m as V,G as z,o as s,c as u,a as i,t as d,h as c,f,n as v,u as t,k as S,b as g,F as C,e as _,d as A}from"./app-03263d9c.js";import{S as J}from"./transition-2742b54b.js";const Q={for:"name",class:"block text-sm leading-6 text-gray-900"},U={class:"relative"},X={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},Y={key:1,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},D={key:0,class:"form-error text-[#b91c1c] text-xs"},H={__name:"FormSelectCombo",props:{modelValue:Object,name:String,className:String,placeholder:{type:String,default:"Select option"},options:{type:Array,default:()=>[]},loadOptions:Function,createOption:Function,error:String},emits:["update:modelValue"],setup(m,{emit:F}){const k=F,o=m,b=w([]),n=w(!1),p=V(()=>l.value===""?null:{missing:!0,label:l.value});let l=w("");z(l,a=>{o.loadOptions&&(n.value=!0,o.loadOptions(a,r=>{b.value=Object.values(r).map(e=>({value:e.id,label:`${e.first_name} ${e.last_name}`})),n.value=!1}))},{immediate:!0});let h=V(()=>l.value===""?b.value:b.value.filter(a=>a.label.toLowerCase().replace(/\s+/g,"").includes(l.value.toLowerCase().replace(/\s+/g,""))));function L(a){k("update:modelValue",a),o.createOption&&(a!=null&&a.missing)&&(n.value=!0,o.createOption(a,r=>{k("update:modelValue",r),n.value=!1}))}return(a,r)=>(s(),u("div",{class:v(m.className)},[i("label",Q,d(m.name),1),i("div",null,[c(t(G),{by:"value","model-value":o.modelValue,"onUpdate:modelValue":L},{default:f(()=>[i("div",U,[i("div",{class:v(["relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left ring-1 shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm",m.error?"ring-[#b91c1c]":"ring-gray-300"])},[c(t(N),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:outline-none focus:ring-0",displayValue:e=>e==null?void 0:e.label,onChange:r[0]||(r[0]=e=>S(l)?l.value=e.target.value:l=e.target.value)},null,8,["displayValue"]),c(t($),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:f(()=>[c(t(j),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})],2),c(t(J),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:r[1]||(r[1]=e=>S(l)?l.value="":l="")},{default:f(()=>[c(t(B),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:f(()=>[t(h).length===0&&!n.value&&!p.value&&!o.createOption?(s(),u("div",X,d(a.$t("Nothing found")),1)):g("",!0),n.value?(s(),u("div",Y,d(a.$t("Loading...")),1)):g("",!0),n.value?g("",!0):(s(),u(C,{key:2},[p.value&&!t(h).length&&o.createOption?(s(),_(t(O),{key:0,as:"template",value:p.value},{default:f(({active:e})=>[i("li",{class:v(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":e,"text-gray-900":!e}])},d(a.$t("Create"))+' "'+d(p.value.label)+'" ',3)]),_:1},8,["value"])):g("",!0),(s(!0),u(C,null,A(t(h),e=>(s(),_(t(O),{as:"template",key:e.value,value:e},{default:f(({selected:x,active:y})=>[i("li",{class:v(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":y,"text-gray-900":!y}])},[i("span",{class:v(["block truncate",{"font-medium":x,"font-normal":!x}])},d(e.label),3),x?(s(),u("span",{key:0,class:v(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":y,"text-teal-600":!y}])},[c(t(q),{class:"h-5 w-5","aria-hidden":"true"})],2)):g("",!0)],2)]),_:2},1032,["value"]))),128))],64))]),_:1})]),_:1})])]),_:1},8,["model-value"])]),m.error?(s(),u("div",D,d(m.error),1)):g("",!0)],2))}};export{H as _};
