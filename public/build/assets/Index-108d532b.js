import{_ as le}from"./App-93f94ba2.js";import{r as $,T as oe,o as r,c as u,a as o,t as f,e as p,f as x,g as C,u as a,i as L,j as se,h as i,n as d,F as w,d as K,b as g,O as ne}from"./app-03263d9c.js";import{_ as Q}from"./FormCheckbox-d13c5a97.js";import{_ as v}from"./FormInput-bb9f5607.js";import{_ as re}from"./FormPhoneInput-429004f0.js";import{b as de,_ as ce,a as ie}from"./ContactTable-630319ea.js";import{_}from"./FormSelect-34d68940.js";import{_ as W}from"./FormTextArea-5647a582.js";import{t as me}from"./index-17bda2d1.js";import{_ as ue}from"./ContactInfo-50142bba.js";import"./Sidebar-0e13a0ad.js";import"./Menu-009aab99.js";import"./Modal-d968cb5e.js";import"./transition-2742b54b.js";import"./hidden-d73b7354.js";import"./use-text-value-74ca2016.js";import"./micro-task-89dcd6af.js";import"./ProfileModal-89ff529e.js";import"./tabs-7065b218.js";import"./LangToggle-fadca48b.js";/* empty css                      */import"./index-dc901c6e.js";import"./MobileSidebar-ac141bfc.js";/* empty css              */import"./pusher-772b6102.js";import"./debounce-51e60686.js";import"./_baseGetTag-4c14ea0a.js";import"./combobox-7fa0f0b0.js";import"./use-tree-walker-07a95138.js";import"./Dropdown-9630f924.js";import"./DropdownItem-2e9b2b3e.js";import"./Pagination-0f108323.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./AlertModal-543f4e13.js";import"./useAlertModal-bfc81e51.js";const fe={class:"h-20 bg-white border-b border-1 md:flex items-center justify-between px-10 hidden"},pe={key:0,class:"text-xl"},be={key:1,class:"text-xl"},ye={class:"flex justify-center md:h-[90vh] md:overflow-y-scroll"},ge={class:"flex justify-center items-center"},ve={class:"rounded-full w-40 h-40 m-4"},he={key:0,class:"text-gray-500",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},Ve=o("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z","clip-rule":"evenodd"},null,-1),xe=[Ve],$e=["src"],Le=["accept"],Ce={for:"file-upload",class:"cursor-pointer inline-flex justify-center rounded-md border border-transparent bg-slate-200 px-4 py-2 text-sm text-slate-700 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},we={class:"grid gap-x-6 gap-y-4 sm:grid-cols-6 pb-6 border-b"},_e={key:0,class:"grid gap-x-6 gap-y-4 sm:grid-cols-2 mt-4 pb-6 border-b"},Se={class:"grid gap-x-6 gap-y-4 sm:grid-cols-6 pt-4 pb-6"},ke={key:1,class:"grid gap-x-6 gap-y-4 sm:grid-cols-2 mb-8 pt-4 border-t"},Ue={class:"mt-4 mb-10 pb-10 flex"},qe={class:d("inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2")},X={__name:"CreateForm",props:["contactGroups","contact","fields","locationSettings","allContactLabels","contactLabelIds"],setup(c){var U,q,j,I,z,O,F,G,A,B,D,M,N,E,Z,J,R,T,H,P;const l=c,h=(U=l.contact)!=null&&U.avatar?$((q=l.contact)==null?void 0:q.avatar):$(null);$();const b=l.fields.reduce((s,n)=>(s[n.name]="",s),{}),y=(s,n)=>{const e=JSON.parse(s);return(e==null?void 0:e[n])??""},t=oe({first_name:((j=l.contact)==null?void 0:j.first_name)??null,last_name:((I=l.contact)==null?void 0:I.last_name)??null,phone:((z=l.contact)==null?void 0:z.phone)??null,email:((O=l.contact)==null?void 0:O.email)??null,group:((G=(F=l.contact)==null?void 0:F.contact_group)==null?void 0:G.uuid)??null,contactLabelIds:$([]),file:null,street:(A=l.contact)!=null&&A.address?y((B=l.contact)==null?void 0:B.address,"street"):null,city:(D=l.contact)!=null&&D.address?y((M=l.contact)==null?void 0:M.address,"city"):null,state:(N=l.contact)!=null&&N.address?y((E=l.contact)==null?void 0:E.address,"state"):null,zip:(Z=l.contact)!=null&&Z.address?y((J=l.contact)==null?void 0:J.address,"zip"):null,country:(R=l.contact)!=null&&R.address?y((T=l.contact)==null?void 0:T.address,"country"):null,metadata:(H=l.contact)!=null&&H.metadata?JSON.parse((P=l.contact)==null?void 0:P.metadata):b}),Y=()=>l.contactGroups.map(s=>({value:s.uuid,label:s.name})),ee=s=>{t.contactLabelIds=[],s.forEach(n=>{t.contactLabelIds.push(n.id)})},te=s=>{const e=s.target.files[0];if(e&&e.size>5242880)alert(me("file size exceeds the limit. Max allowed size:")+" 5242880b"),s.target.value=null;else{const V=new FileReader;V.onload=m=>{h.value=m.target.result},t.file=e,V.readAsDataURL(e)}},ae=()=>{l.contact?t.post("/contacts/"+l.contact.uuid):t.post("/contacts")},k=s=>s.split(", ").map(n=>({label:n,value:n}));return(s,n)=>(r(),u(w,null,[o("div",fe,[o("div",null,[l.contact?(r(),u("h1",be,f(s.$t("Edit contact")),1)):(r(),u("h1",pe,f(s.$t("Add contact")),1))]),o("div",null,[l.contact?(r(),p(a(L),{key:1,href:"/contacts/"+l.contact.uuid,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-200 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},{default:x(()=>[C(f(s.$t("Back")),1)]),_:1},8,["href"])):(r(),p(a(L),{key:0,href:"/contacts",class:"inline-flex justify-center rounded-md border border-transparent bg-slate-200 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},{default:x(()=>[C(f(s.$t("Cancel")),1)]),_:1}))])]),o("div",ye,[o("form",{onSubmit:n[10]||(n[10]=se(e=>ae(),["prevent"])),class:"w-[30em]"},[o("div",ge,[o("div",ve,[a(h)===null?(r(),u("svg",he,xe)):(r(),u("img",{key:1,class:"w-40 h-40 rounded-full object-cover",src:a(h),alt:"Contact Image"},null,8,$e))]),o("input",{type:"file",class:"sr-only",accept:".jpg, .png",id:"file-upload",onChange:te},null,40,Le),o("label",Ce,f(s.$t("Upload image")),1)]),o("div",we,[i(v,{modelValue:a(t).first_name,"onUpdate:modelValue":n[0]||(n[0]=e=>a(t).first_name=e),name:s.$t("First name"),error:a(t).errors.first_name,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),i(v,{modelValue:a(t).last_name,"onUpdate:modelValue":n[1]||(n[1]=e=>a(t).last_name=e),name:s.$t("Last name"),error:a(t).errors.last_name,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),i(re,{modelValue:a(t).phone,"onUpdate:modelValue":n[2]||(n[2]=e=>a(t).phone=e),name:s.$t("Phone"),error:a(t).errors.phone,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),i(v,{modelValue:a(t).email,"onUpdate:modelValue":n[3]||(n[3]=e=>a(t).email=e),name:s.$t("Email"),error:a(t).errors.email,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),i(_,{modelValue:a(t).group,"onUpdate:modelValue":n[4]||(n[4]=e=>a(t).group=e),name:s.$t("Group"),error:a(t).errors.group,options:Y(),type:"text",class:d("sm:col-span-6")},null,8,["modelValue","name","error","options"]),i(de,{allData:l.allContactLabels,name:s.$t("Label"),type:"allContactLabels",selectedData:c.contactLabelIds,onContactListDataForward:ee,class:d("sm:col-span-6")},null,8,["allData","name","selectedData"])]),c.locationSettings==="before"?(r(),u("div",_e,[(r(!0),u(w,null,K(l.fields,(e,V)=>(r(),u("div",{key:V,class:d(e.type!="input"?"sm:col-span-2":"sm:col-span-1")},[e.type==="input"?(r(),p(v,{key:0,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,label:s.$t(e.name),type:e.value,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","type","required"])):g("",!0),e.type==="textarea"?(r(),p(W,{key:1,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,label:s.$t(e.name),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):g("",!0),e.type==="select"?(r(),p(_,{key:2,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,options:k(e.value),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","options","required"])):g("",!0),e.type==="checkbox"?(r(),p(Q,{key:3,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,label:e.name,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):g("",!0)],2))),128))])):g("",!0),o("div",Se,[i(v,{modelValue:a(t).street,"onUpdate:modelValue":n[5]||(n[5]=e=>a(t).street=e),name:s.$t("Street"),error:a(t).errors.street,type:"text",class:d("sm:col-span-6")},null,8,["modelValue","name","error"]),i(v,{modelValue:a(t).city,"onUpdate:modelValue":n[6]||(n[6]=e=>a(t).city=e),name:s.$t("City"),error:a(t).errors.city,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),i(v,{modelValue:a(t).state,"onUpdate:modelValue":n[7]||(n[7]=e=>a(t).state=e),name:s.$t("State"),error:a(t).errors.state,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),i(v,{modelValue:a(t).zip,"onUpdate:modelValue":n[8]||(n[8]=e=>a(t).zip=e),name:s.$t("Zip code"),error:a(t).errors.zip,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),i(v,{modelValue:a(t).country,"onUpdate:modelValue":n[9]||(n[9]=e=>a(t).country=e),name:s.$t("Country"),error:a(t).errors.country,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"])]),c.locationSettings==="after"?(r(),u("div",ke,[(r(!0),u(w,null,K(l.fields,(e,V)=>(r(),u("div",{key:V,class:d(e.type!="input"?"sm:col-span-2":"sm:col-span-1")},[e.type==="input"?(r(),p(v,{key:0,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,label:s.$t(e.name),type:e.value,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","type","required"])):g("",!0),e.type==="textarea"?(r(),p(W,{key:1,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,label:s.$t(e.name),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):g("",!0),e.type==="select"?(r(),p(_,{key:2,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,options:k(e.value),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","options","required"])):g("",!0),e.type==="checkbox"?(r(),p(Q,{key:3,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":m=>a(t).metadata[e.name]=m,name:e.name,label:e.name,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):g("",!0)],2))),128))])):g("",!0),o("div",Ue,[i(a(L),{href:"/contacts",class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},{default:x(()=>[C(f(s.$t("Cancel")),1)]),_:1}),o("button",qe,[o("span",null,f(s.$t("Save")),1)])])],32)])],64))}},je={class:"md:bg-inherit bg-white md:flex md:flex-grow capitalize"},Ie={class:"px-4 pt-4"},ze={class:"flex justify-between mt-2"},Oe={class:"flex space-x-1 text-xl"},Fe={class:"text-slate-500"},Ge={class:"flex space-x-2 items-center"},Ae=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[o("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[o("path",{d:"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12Zm10-8a8 8 0 1 0 0 16a8 8 0 0 0 0-16Z"}),o("path",{d:"M13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4V7Z"})])],-1),Be={class:"md:w-[70%] bg-cover md:h-[100vh] md:overflow-y-hidden"},De={key:0},Me={key:1},Ne={key:0},Ee={key:1},Ze={class:"md:flex justify-center pt-20 hidden"},Je={class:"border pt-20 py-10 w-[30em] rounded-xl bg-white"},Re={class:"text-center text-2xl text-slate-500 mb-6"},Te=o("div",{class:"flex justify-center"},[o("div",{class:"border-r border-slate-500 h-10"})],-1),He={class:"text-center text-slate-600"},Pe=o("div",{class:"flex justify-center"},[o("div",{class:"border-r border-slate-500 h-10"})],-1),Ke={class:"flex justify-center space-x-4 mt-6"},jt={__name:"Index",props:{rows:Object,filters:Object,rowCount:Number,contactGroups:Object,contact:Object,editContact:Boolean,fields:Object,locationSettings:String,flash:Object,allContactLabels:Object,contactLabelIds:Array,contactLabels:String,labelState:String},setup(c){const l=c,h=$(!1),S=b=>{ne.visit("/contacts",{method:"get",data:b})};return(b,y)=>(r(),u(w,null,[i(le,null,{default:x(()=>[o("div",je,[o("div",{class:d(["md:w-[30%] flex-col h-full bg-white border-r border-l md:flex",b.$page.url==="/contacts/add"||c.contact?"hidden":""])},[o("div",Ie,[o("div",ze,[o("div",Oe,[o("h2",null,f(b.$t("Contacts")),1),o("span",Fe,f(l.rowCount),1)]),o("div",Ge,[i(a(L),{href:"/contacts/add",title:"Add Contact"},{default:x(()=>[Ae]),_:1})])])]),i(ie,{rows:l.rows,filters:l.filters,type:"contact",onCallback:S,allContactLabels:c.allContactLabels,contactLabelIds:c.contactLabelIds,labelState:c.labelState,rowCount:c.rowCount},null,8,["rows","filters","allContactLabels","contactLabelIds","labelState","rowCount"])],2),o("div",Be,[c.contact?(r(),u("div",De,[c.editContact?(r(),p(X,{key:1,contactGroups:l.contactGroups,contact:l.contact,fields:l.fields,locationSettings:c.locationSettings,allContactLabels:l.allContactLabels,contactLabelIds:c.contactLabelIds},null,8,["contactGroups","contact","fields","locationSettings","allContactLabels","contactLabelIds"])):(r(),p(ue,{key:0,class:"pt-20",contact:c.contact,fields:l.fields,locationSettings:c.locationSettings,contactLabels:c.contactLabels},null,8,["contact","fields","locationSettings","contactLabels"]))])):(r(),u("div",Me,[b.$page.url==="/contacts/add"?(r(),u("div",Ne,[i(X,{contactGroups:l.contactGroups,contact:l.contact,fields:l.fields,locationSettings:c.locationSettings,allContactLabels:l.allContactLabels,contactLabelIds:c.contactLabelIds},null,8,["contactGroups","contact","fields","locationSettings","allContactLabels","contactLabelIds"])])):(r(),u("div",Ee,[o("div",Ze,[o("div",Je,[o("h2",Re,f(b.$t("Select contact")),1),Te,o("h2",He,f(b.$t("Or")),1),Pe,o("div",Ke,[i(a(L),{href:"/contacts/add",class:"bg-primary rounded-lg text-sm text-white p-2 px-8 text-center"},{default:x(()=>[C(f(b.$t("Add contact")),1)]),_:1}),o("button",{onClick:y[0]||(y[0]=t=>h.value=!0),class:"bg-primary rounded-lg text-sm text-white p-2 px-8 text-center"},f(b.$t("Bulk upload")),1)])])])]))]))])])]),_:1}),i(ce,{type:"contact",modelValue:h.value,"onUpdate:modelValue":y[1]||(y[1]=t=>h.value=t),allContactLabels:c.allContactLabels,contactLabelIds:c.contactLabelIds},null,8,["modelValue","allContactLabels","contactLabelIds"])],64))}};export{jt as default};
