import{r as v,o as l,e as f,f as N,a as t,j as w,c as p,d as O,F as C,n as b,b as U,t as F,x as j,O as M}from"./app-03263d9c.js";import{_ as E}from"./Modal-d968cb5e.js";import{_ as I}from"./FormInput-bb9f5607.js";import{_ as D}from"./FormImage-4bcd6c93.js";import{_ as Z}from"./FormSelect-34d68940.js";import{l as L}from"./index-dc901c6e.js";/* empty css              */const R={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},z={class:"mt-4 flex"},q=["disabled"],G={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},H=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),J=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),K=[H,J],P={key:1},se={__name:"FormModal",props:{modelValue:Boolean,label:String,url:String,form:Object,formInputs:Array},emits:["update:modelValue","callback"],setup(d,{emit:T}){const y=d,o=v(y.form),m=v(!1),r=v({}),A=async a=>{m.value=!0,r.value={};try{const s=new FormData;Object.keys(o.value).forEach(i=>{const n=o.value[i];Array.isArray(n)?n.forEach(u=>{s.append(i+"[]",u)}):s.append(i,n)});const e=await j.post(y.url,s,{headers:{"Content-Type":"multipart/form-data"}});e.status===200&&e.data.success?S(e):$(e)}catch(s){B(s)}finally{setTimeout(()=>{m.value=!1},1e3)}},S=a=>{setTimeout(()=>{h(),M.reload(),L(a.data.message,{autoClose:3e3}),g("callback",a.data)},1e3)},$=a=>{setTimeout(()=>{a.data.errors&&(r.value=a.data.errors)},1e3)},B=a=>{setTimeout(()=>{r.value=a.response.data.errors},1e3)},g=T;function h(){g("update:modelValue",!1)}return(a,s)=>(l(),f(E,{label:d.label,isOpen:d.modelValue},{default:N(()=>[t("div",R,[t("form",{onSubmit:s[0]||(s[0]=w(e=>A(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[(l(!0),p(C,null,O(d.formInputs,(e,i)=>{var n,u,_,V,x,k;return l(),p(C,{key:i},[e.inputType=="FormInput"?(l(),f(I,{key:0,modelValue:o.value[e.name],"onUpdate:modelValue":c=>o.value[e.name]=c,error:(u=(n=r.value)==null?void 0:n[e.name])==null?void 0:u[0],name:e.label,type:e.type,class:b(e.className)},null,8,["modelValue","onUpdate:modelValue","error","name","type","class"])):e.inputType=="FormSelect"?(l(),f(Z,{key:1,modelValue:o.value[e.name],"onUpdate:modelValue":c=>o.value[e.name]=c,error:(V=(_=r.value)==null?void 0:_[e.name])==null?void 0:V[0],options:e.options,name:e.label,class:b(e.className),placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","error","options","name","class","placeholder"])):e.inputType=="FormImage"?(l(),f(D,{key:2,modelValue:o.value[e.name],"onUpdate:modelValue":c=>o.value[e.name]=c,error:(k=(x=r.value)==null?void 0:x[e.name])==null?void 0:k[0],options:e.options,label:e.label,class:b(e.className)},null,8,["modelValue","onUpdate:modelValue","error","options","label","class"])):U("",!0)],64)}),128)),t("div",z,[t("button",{type:"button",onClick:w(h,["self"]),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},F(a.$t("Cancel")),1),t("button",{class:b(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":m.value}]),disabled:m.value},[m.value?(l(),p("svg",G,K)):(l(),p("span",P,F(a.$t("Save")),1))],10,q)])],32)])]),_:1},8,["label","isOpen"]))}};export{se as _};
