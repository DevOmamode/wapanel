import{m as y,r as d,T as g,e as L,f as _,o as n,a as t,t as o,u as a,c as i,F as T,d as D,h as b,j as v,n as k,g as F,K as C}from"./app-03263d9c.js";import Y from"./App-f5259e3c.js";import{_ as $}from"./Modal-d968cb5e.js";import{P as W}from"./Pagination-0f108323.js";import"./App-74e182ad.js";import"./Sidebar-8bc37796.js";import"./Menu-77cdc9e0.js";import"./ProfileModal-89ff529e.js";import"./FormInput-bb9f5607.js";import"./FormPhoneInput-429004f0.js";/* empty css                      */import"./FormSelect-34d68940.js";import"./index-17bda2d1.js";import"./hidden-d73b7354.js";import"./use-text-value-74ca2016.js";import"./transition-2742b54b.js";import"./micro-task-89dcd6af.js";import"./tabs-7065b218.js";import"./LangToggle-fadca48b.js";import"./MobileSidebar-f06fc031.js";import"./index-dc901c6e.js";/* empty css              */import"./Sidebar-0372f3ad.js";import"./_plugin-vue_export-helper-c27b6911.js";const q={class:"text-xl mb-6"},K={class:"bg-white border px-2 py-2 rounded-md mb-8"},P={class:"text-sm mb-2"},R={class:"text-sm"},z={class:"text-sm flex items-center gap-x-4 mb-2"},E=["disabled"],I={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},J=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),G=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),H=[J,G],Q={key:1},X={key:0,class:"mb-8"},tt={class:"flex items-center text-sm"},et=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),st={class:"ml-1 mt-1"},ot={key:1},nt=t("div",{class:"flex items-center gap-x-1 text-sm bg-orange-100 py-3 px-2 rounded-md mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),t("span",null,[t("b",null,"Important:"),F(" Before updating backup your database and files")])],-1),it={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2 mb-6"},rt={class:"flex items-center gap-x-2"},at=["src"],lt=t("h2",{class:"text-xl mb-2"},"Addons",-1),dt={key:2,class:"flex items-center text-sm mb-4"},ct=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),pt={class:"ml-1 mt-1"},ut={key:3,class:"grid grid-cols-2 gap-x-4 gap-y-1"},mt={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2"},ht={class:"flex items-center gap-x-2"},vt=["src","alt"],ft=["onClick"],gt={key:1,class:"border rounded-md px-4 py-1 bg-red-700 text-white flex items-center"},_t=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),bt={class:"ml-1"},xt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},wt={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},yt={class:"flex items-center gap-x-3"},kt=["src"],Ct={class:"text-[16px]"},$t={class:"text-[17px] text-gray-800 mb-2"},At={class:"text-sm"},Zt={class:"mt-3 border-t pt-5 flex"},Mt=["disabled"],St={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Bt=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Vt=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),jt=[Bt,Vt],Ut={key:1},Nt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},Ot={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},Lt={class:"flex items-center gap-x-3"},Tt={class:"text-[16px]"},Dt={class:"text-sm"},Ft={class:"mt-3 border-t pt-5 flex"},Yt=["disabled"],Wt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},qt=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Kt=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),Pt=[qt,Kt],Rt={key:1},ge={__name:"Updates",props:{config:{type:Object,required:!0},rows:{type:Array,required:!0}},setup(p){const A=p,Z=y(()=>C().props.applicationVersion),M=y(()=>C().props.applicationReleaseDate),x=d(null),w=d(null),S=d(null),B=d(!1),u=d(!1),m=d(!1),c=e=>{const s=A.config.find(r=>r.key===e);return s?s.value:""},l=g({uuid:null,purchase_code:null,addon:null,name:null}),h=g({update:!0}),f=g({checkUpdate:!0}),V=()=>{u.value=!0},j=e=>{x.value=e.logo,w.value=e.name,S.value=e.description;const s=e.metadata?JSON.parse(e.metadata):null;l.uuid=e.uuid,l.name=e.name,l.addon=(s==null?void 0:s.name)||e.name,m.value=!0},U=()=>{l.post("/admin/addons/update",{preserveScroll:!0,onSuccess:()=>{m.value=!1}})},N=()=>{h.post("/admin/update",{preserveScroll:!0,onSuccess:()=>{u.value=!1}})},O=()=>{f.get("/admin/updates/check",{preserveScroll:!0,onSuccess:()=>{B.value=!1}})};return(e,s)=>(n(),L(Y,null,{default:_(()=>[t("div",null,[t("h2",q,o(e.$t("Swiftchats Updates")),1),t("div",K,[t("div",P,"Current Version: v"+o(Z.value),1),t("div",R,"Released Date: "+o(M.value),1)]),t("div",z,[t("span",null,"Last checked on "+o(c("last_update_check")),1),t("button",{onClick:s[0]||(s[0]=r=>O()),disabled:a(f).processing,class:"border px-2 py-1 text-sm rounded-md bg-primary text-white"},[a(f).processing?(n(),i("svg",I,H)):(n(),i("span",Q,"Check Again"))],8,E)]),c("is_update_available")==0?(n(),i("div",X,[t("p",tt,[et,t("span",st,o(e.$t("You have installed the latest version of Swiftchats")),1)])])):(n(),i("div",ot,[nt,t("div",it,[t("div",rt,[t("img",{class:"h-5 w-full",src:"/images/logo.png",alt:"Swiftchats Logo"},null,8,at),t("span",null,"v"+o(c("available_version")),1)]),t("button",{onClick:s[1]||(s[1]=r=>V()),class:"border rounded-md px-4 py-1"},o(e.$t("Update to version")+" "+c("available_version")),1)])])),lt,p.rows.data.length==0?(n(),i("p",dt,[ct,t("span",pt,o(e.$t("Your addons are all upto date.")),1)])):(n(),i("div",ut,[(n(!0),i(T,null,D(p.rows.data,r=>(n(),i("div",mt,[t("div",ht,[t("img",{class:"h-8 w-8",src:"/images/"+r.logo,alt:r.name},null,8,vt),t("span",null,o(r.name),1)]),c("is_update_available")==0?(n(),i("button",{key:0,onClick:zt=>j(r),class:"border rounded-md px-4 py-1"},"Update",8,ft)):(n(),i("div",gt,[_t,t("span",bt,o(e.$t("Update script first")),1)]))]))),256))])),b(W,{class:"mt-3",pagination:p.rows.meta},null,8,["pagination"])]),b($,{isOpen:m.value},{default:_(()=>[t("div",xt,[t("div",wt,[t("div",yt,[t("div",null,[t("img",{class:"h-8 w-8",src:"/images/"+x.value,alt:"Whatsapp Logo"},null,8,kt)]),t("div",Ct,o(e.$t(w.value)),1)])]),t("form",{onSubmit:s[3]||(s[3]=v(r=>U(),["prevent"]))},[t("div",null,[t("div",$t,o(e.$t("Update module")),1),t("h4",At,o(e.$t("A new version is available. Would you like to proceed with updating the module?")),1)]),t("div",Zt,[t("button",{type:"button",onClick:s[2]||(s[2]=v(r=>m.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(e.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":a(l).processing}]),disabled:a(l).processing},[a(l).processing?(n(),i("svg",St,jt)):(n(),i("span",Ut,o(e.$t("Yes, run the update")),1))],10,Mt)])],32)])]),_:1},8,["isOpen"]),b($,{isOpen:u.value},{default:_(()=>[t("div",Nt,[t("div",Ot,[t("div",Lt,[t("div",Tt,o(e.$t("Update to the latest version")),1)])]),t("form",{onSubmit:s[5]||(s[5]=v(r=>N(),["prevent"]))},[t("div",null,[t("h4",Dt,o(e.$t("Would you like to proceed with updating Swiftchats?")),1)]),t("div",Ft,[t("button",{type:"button",onClick:s[4]||(s[4]=v(r=>u.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(e.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":a(h).processing}]),disabled:a(h).processing},[a(h).processing?(n(),i("svg",Wt,Pt)):(n(),i("span",Rt,o(e.$t("Yes, run the update")),1))],10,Yt)])],32)])]),_:1},8,["isOpen"])]),_:1}))}};export{ge as default};
