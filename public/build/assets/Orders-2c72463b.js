import{o as n,e as j,f as s,h as a,g as l,t,c,F as I,d as V,b as k,r as u,O as Y,a as e,n as N,y as H,l as G,x as K,ad as X,ae as ee,T as te,u as x,j as R}from"./app-03263d9c.js";import{_ as se}from"./App-93f94ba2.js";import{d as ae}from"./debounce-51e60686.js";import{_ as L}from"./Table-992b3240.js";import{T as W,a as U,_ as p}from"./TableHeaderRowItem-d69b56f6.js";import{T as Z,a as E,_ as f}from"./TableBodyRowItem-4927bcdc.js";import"./index-dc901c6e.js";import"./_baseGetTag-4c14ea0a.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as oe}from"./Modal-d968cb5e.js";import{_ as ne}from"./FormInput-bb9f5607.js";import{t as J}from"./index-17bda2d1.js";import{I as re,y as ie,S as de,g as ue,x as ce}from"./tabs-7065b218.js";import"./Sidebar-0e13a0ad.js";import"./Menu-009aab99.js";import"./ProfileModal-89ff529e.js";import"./FormPhoneInput-429004f0.js";/* empty css                      */import"./FormSelect-34d68940.js";import"./hidden-d73b7354.js";import"./use-text-value-74ca2016.js";import"./transition-2742b54b.js";import"./micro-task-89dcd6af.js";import"./LangToggle-fadca48b.js";import"./MobileSidebar-ac141bfc.js";/* empty css              */import"./pusher-772b6102.js";import"./Pagination-0f108323.js";const pe=["src"],fe={__name:"DrawerProductsTable",props:["rows"],setup(m){return(i,h)=>(n(),j(L,{rows:m.rows,isPaginationDisable:!0,className:"max-h-60 overflow-auto pb-5 px-8",url:!0},{default:s(()=>[a(W,null,{default:s(()=>[a(U,null,{default:s(()=>[a(p,{position:"first"},{default:s(()=>[l(t(i.$t("S.No")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(i.$t("Image")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(i.$t("Name")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(i.$t("Quantity")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(i.$t("MRP")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(i.$t("Price")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(i.$t("Retailer ID")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(i.$t("Product Id")),1)]),_:1})]),_:1})]),_:1}),a(Z,null,{default:s(()=>[(n(!0),c(I,null,V(m.rows.data,(w,$)=>(n(),j(E,{key:$},{default:s(()=>[a(f,{position:"first",class:"capitalize"},{default:s(()=>[l(t($+1),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[w.image?(n(),c("img",{key:0,src:w.image,alt:"",class:"w-20 h-20 rounded-full dark:bg-gray-500"},null,8,pe)):k("",!0)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(w.name),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(w.quantity),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(w.price),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(w.total),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(w.retailer_id),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(w.product_id),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["rows"]))}};const _=m=>(X("data-v-2bc9974c"),m=m(),ee(),m),he=_(()=>e("div",{class:"flex mb-6 mt-6 justify-between items-center"},null,-1)),_e=["onClick"],me={class:"flex justify-between py-5 px-8 border-b"},ve=_(()=>e("h1",null,"Order Products",-1)),ge=_(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#034737",class:"icon icon-tabler icons-tabler-filled icon-tabler-xbox-x"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10m3.6 5.2a1 1 0 0 0 -1.4 .2l-2.2 2.933l-2.2 -2.933a1 1 0 1 0 -1.6 1.2l2.55 3.4l-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2 -2.933l2.2 2.933a1 1 0 0 0 1.6 -1.2l-2.55 -3.4l2.55 -3.4a1 1 0 0 0 -.2 -1.4"})],-1)),be=[ge],we={class:"w-full overflow-y-auto",style:{height:"calc(100% - 65px)","scrollbar-width":"none"}},xe={class:"flex justify-between py-5 px-8 border-b gap-4 flex-col md:flex-row"},ye={class:"flex flex-col gap-2 w-full p-6 bg-white border border-gray-200 rounded-lg shadow-sm h-full"},$e=_(()=>e("h1",{class:"text-1xl pb-5 flex justify-between"},[e("span",null," Payment Info "),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-receipt"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16l-3 -2l-2 2l-2 -2l-2 2l-2 -2l-3 2m4 -14h6m-6 4h6m-2 4h2"})])],-1)),ke={class:"flex justify-between"},Ce=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Order Id : ",-1)),Se={class:"text-right"},je={class:"flex justify-between"},Me=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Total Amount : ",-1)),Oe={class:"text-right"},Te={class:"flex justify-between"},Ae=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Payment Status : ",-1)),Ie={class:"text-right"},Pe={class:"flex justify-between"},Fe=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Payment Reference Id : ",-1)),Ne={class:"text-right"},Ve={class:"flex flex-col gap-2 w-full p-6 bg-white border border-gray-200 rounded-lg shadow-sm h-full"},Be=G('<h1 class="text-1xl pb-5 flex justify-between" data-v-2bc9974c><span data-v-2bc9974c> Shipping Address </span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-map-pins" data-v-2bc9974c><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-2bc9974c></path><path d="M10.828 9.828a4 4 0 1 0 -5.656 0l2.828 2.829l2.828 -2.829z" data-v-2bc9974c></path><path d="M8 7l0 .01" data-v-2bc9974c></path><path d="M18.828 17.828a4 4 0 1 0 -5.656 0l2.828 2.829l2.828 -2.829z" data-v-2bc9974c></path><path d="M16 15l0 .01" data-v-2bc9974c></path></svg></h1>',1),ze={class:"flex justify-between"},De={class:"font-normal whitespace-nowrap capitalize"},qe={class:"text-right"},He=_(()=>e("h1",{class:"text-1xl py-5 px-8"},[e("span",null," Product Summary ")],-1)),Re={class:"flex justify-end py-5 px-8 mt-6 border-t"},Je={class:"w-1/2"},Le=_(()=>e("h1",{class:"text-1xl pb-4"}," Order Summary ",-1)),We={class:"flex flex-col gap-2"},Ue=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Sub Total : ",-1)),Ze={class:"text-right"},Ee={key:0,class:"flex justify-between"},Qe=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Tax : ",-1)),Ye={class:"text-right"},Ge={key:1,class:"flex justify-between"},Ke=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Shipping : ",-1)),Xe={class:"text-right"},et={key:2,class:"flex justify-between border-b-2 pb-2"},tt=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Discount : ",-1)),st={class:"text-right"},at={class:"flex justify-between"},lt=_(()=>e("span",{class:"font-normal whitespace-nowrap"},"Total : ",-1)),ot={class:"text-right"},nt={__name:"OrdersTable",props:["rows","filters","catalog_id"],setup(m){var D,q;const i=m,h=u(!1),w=u(!1),$=u({search:(D=i.filters)==null?void 0:D.search,page:(q=i.filters)==null?void 0:q.page});ae(()=>{w.value=!0,M()},1e3);const M=()=>{const o=window.location.pathname;Y.visit(o,{method:"get",data:$.value})},O=u([]),T=u([]),r=u(null),B=u(null),v=u(null),d=u(null),y=u(null),g=u(null),A=u(null),Q=async o=>{var C=new FormData;C.append("product_retailer_ids",JSON.stringify(o.product_retailer_ids)),C.append("catalog_id",o.catalog_id),K.post("/get/orderProducts",C).then(P=>{try{h.value=!0,P.data.products.data.forEach(S=>{var F=o.product_retailer_id_with_quantity.findIndex(b=>b.product_retailer_id==S.retailer_id);S.quantity=o.product_retailer_id_with_quantity[F].quantity,S.total=o.product_retailer_id_with_quantity[F].productsPrice}),O.value=P.data.products,T.value=o.shipping_address?JSON.parse(o.shipping_address):null,B.value=(Math.round(o.total*100)/100).toFixed(2),r.value=o.total,d.value=o.currency,y.value=o.id,g.value=o.status,A.value=o.payment_metadata?JSON.parse(o.payment_metadata).payment.transaction.id:"",v.value=o.price_details?JSON.parse(o.price_details):null,v.value?r.value=(Math.round((r.value+(v.value.tax+v.value.shipping-v.value.discount))*100)/100).toFixed(2):r.value=(Math.round(o.total*100)/100).toFixed(2)}catch(S){console.log(S)}})};return(o,C)=>{var P,S,F;return n(),c(I,null,[he,a(L,{rows:m.rows},{default:s(()=>[a(W,null,{default:s(()=>[a(U,null,{default:s(()=>[a(p,{position:"first"},{default:s(()=>[l(t(o.$t("S.No")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Phone number")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Buyer")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Total Amount")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Currency")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Status")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Ordered at")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Updated at")),1)]),_:1}),a(p,null,{default:s(()=>[l(t(o.$t("Action")),1)]),_:1})]),_:1})]),_:1}),a(Z,null,{default:s(()=>[(n(!0),c(I,null,V(m.rows.data,(b,z)=>(n(),j(E,{key:z},{default:s(()=>[a(f,{position:"first",class:"capitalize"},{default:s(()=>[l(t(z+1),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(b.phone_number),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(b.buyer),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(b.total),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(b.currency),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(b.status),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(b.ordered_at),1)]),_:2},1024),a(f,{class:"hidden sm:table-cell"},{default:s(()=>[l(t(b.created_at),1)]),_:2},1024),a(f,{className:"text-center"},{default:s(()=>[e("button",{class:"rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 text-center",onClick:Ft=>Q(b)},t(o.$t("View")),9,_e)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["rows"]),e("div",{class:"right-drawer",style:H({width:h.value?"60vw":"0",paddingLeft:(h.value,"0")})},[e("div",me,[ve,e("button",{class:"close",onClick:C[0]||(C[0]=b=>h.value=!1)},be)]),e("div",we,[e("div",xe,[e("div",ye,[$e,e("div",ke,[Ce,e("span",Se,t("#"+y.value),1)]),e("div",je,[Me,e("span",Oe,t(r.value),1)]),e("div",Te,[Ae,e("span",Ie,[e("span",{class:N(["px-3 py-1 rounded-[5px] text-white text-xs",[A.value?"bg-green-700":"bg-gray-400"]])},t(g.value),3)])]),e("div",Pe,[Fe,e("span",Ne,t(A.value?A.value:"-"),1)])]),e("div",Ve,[Be,(n(!0),c(I,null,V(T.value,(b,z)=>(n(),c("div",ze,[e("span",De,t(z),1),e("span",qe,t(b),1)]))),256))])]),He,h.value==!0?(n(),j(fe,{key:0,rows:O.value,filters:i.filters,url:!0},null,8,["rows","filters"])):k("",!0),e("div",Re,[e("div",Je,[Le,e("div",We,[e("div",{class:N(["flex justify-between",[v.value?"":"border-b-2 pb-2"]])},[Ue,e("span",Ze,t(d.value+" "+B.value),1)],2),v.value?(n(),c("div",Ee,[Qe,e("span",Ye,t(d.value+" "+(Math.round(((P=v.value)==null?void 0:P.tax)*100)/100).toFixed(2)),1)])):k("",!0),v.value?(n(),c("div",Ge,[Ke,e("span",Xe,t(d.value+" "+(Math.round(((S=v.value)==null?void 0:S.shipping)*100)/100).toFixed(2)),1)])):k("",!0),v.value?(n(),c("div",et,[tt,e("span",st,t(d.value+" "+(Math.round(((F=v.value)==null?void 0:F.discount)*100)/100).toFixed(2)),1)])):k("",!0),e("div",at,[lt,e("span",ot,t(d.value+" "+r.value),1)])])])])])],4),e("div",{class:"drawer-mask",style:H({width:h.value?"100vw":"0",opacity:h.value?"0.6":"0"}),onClick:C[1]||(C[1]=b=>h.value=!1)},null,4)],64)}}},rt=le(nt,[["__scopeId","data-v-2bc9974c"]]),it={class:"bg-white md:bg-inherit pt-10 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] h-full md:overflow-y-auto"},dt={class:"flex justify-between"},ut={class:"text-xl mb-1"},ct={class:"mb-6 flex items-center text-sm leading-6"},pt={class:"ml-1 mt-1"},ft={key:0,class:"w-full px-2 sm:px-0"},ht=["href"],_t={key:1,class:"py-2.5 block"},mt={key:1,class:"bg-white rounded-xl"},vt={class:"p-4 py-8"},gt=e("div",{class:"flex justify-center mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-shopping-bag"},[e("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e("path",{d:"M16 10a4 4 0 0 1-8 0"})])],-1),bt={class:"text-center text-lg font-medium mb-4"},wt={key:2,class:"bg-white rounded-xl"},xt={class:"p-4 py-8"},yt=e("div",{class:"flex justify-center mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-shopping-bag"},[e("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e("path",{d:"M16 10a4 4 0 0 1-8 0"})])],-1),$t={class:"text-center text-lg font-medium mb-4"},kt={key:1,class:"border flex items-center justify-between p-2 rounded w-full"},Ct=e("h1",null,"Add a Catalog to View Products, Orders, Settings & Webhook.",-1),St={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},jt={class:"mt-4 flex"},Mt=["disabled"],Ot={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Tt=e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),At=e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),It=[Tt,At],Pt={key:1},ds={__name:"Orders",props:["rows","title","catalog_id","productsCount"],setup(m){const i=m,h=u(!1),w=u([{name:"Products",url:"/ecommerce/products"},{name:"Orders",url:"/ecommerce/orders"},{name:"Settings",url:"/ecommerce/settings"},{name:"Webhook",url:"/ecommerce/webhook"}]),$=u("/store/catalog"),M=u("post"),O=u("Add Catalog"),T=i.catalog_id?u(!0):u(!1),r=te({catalog_id:null}),B=(d,y={})=>{O.value=J("Add Catalog"),$.value="/store/catalog",M.value="post",d?(O.value=J("Add Catalog"),$.value="/store/catalog/"+d.id,M.value="put",r.catalog_id=d.catalog_id,h.value=!0):(r.catalog_id=null,r.errors.catalog=null,h.value=!0)},v=()=>{if(r.processing=!0,!r.catalog_id)return r.catalog_id||(r.errors.catalog="This Field is required"),r.processing=!1,!1;M.value==="post"?r.post($.value,{onFinish:()=>{r.processing=!1,h.value=!1,T.value=!!i.catalog_id}}):r.put($.value,{onFinish:()=>{h.value=!1}})};return(d,y)=>(n(),j(se,null,{default:s(()=>[e("div",it,[e("div",dt,[e("div",null,[e("h2",ut,t(d.$t("WhatsApp eCommerce Catalog")),1),e("p",ct,[e("span",pt,t(d.$t("Integrate and manage your WhatsApp catalogs")),1)])])]),x(T)==!0?(n(),c("div",ft,[a(x(ce),{selectedIndex:1},{default:s(()=>[a(x(re),{class:"flex space-x-1 rounded-xl text-white bg-primary p-1 max-w-md"},{default:s(()=>[(n(!0),c(I,null,V(w.value,g=>(n(),j(x(ie),{as:"template",key:g.name},{default:s(({selected:A})=>[e("button",{class:N(["w-full rounded-lg text-sm font-medium leading-5","  focus:outline-none ",A?"bg-white shadow text-black":"hover:bg-white/[0.12] hover:text-white"])},[g.name!="Orders"?(n(),c("a",{key:0,href:g.url,class:"py-2.5 block"},t(g.name),9,ht)):(n(),c("span",_t,t(g.name),1))],2)]),_:2},1024))),128))]),_:1}),a(x(de),{class:"mt-2"},{default:s(()=>[(n(!0),c(I,null,V(w.value,g=>(n(),j(x(ue),null,{default:s(()=>[i.productsCount?(n(),j(rt,{key:0,rows:i.rows,filters:i.filters,catalog_id:i.catalog_id},null,8,["rows","filters","catalog_id"])):k("",!0),m.productsCount==0?(n(),c("div",mt,[e("div",vt,[gt,e("h3",bt,t(d.$t("Sync Products to view Orders!")),1)])])):k("",!0),m.productsCount!=0&&!i.rows.data.length?(n(),c("div",wt,[e("div",xt,[yt,e("h3",$t,t(d.$t("You don't have any Orders!")),1)])])):k("",!0)]),_:1}))),256))]),_:1})]),_:1})])):x(T)==!1?(n(),c("div",kt,[Ct,e("button",{onClick:y[0]||(y[0]=g=>B()),class:"rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},t(d.$t("Add Catalog")),1)])):k("",!0)]),a(oe,{label:O.value,isOpen:h.value},{default:s(()=>[e("div",St,[e("form",{onSubmit:y[3]||(y[3]=R(g=>v(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[a(ne,{modelValue:x(r).catalog_id,"onUpdate:modelValue":y[1]||(y[1]=g=>x(r).catalog_id=g),error:x(r).errors.catalog,name:d.$t("Catalog Id"),type:"text",class:N("sm:col-span-6"),disabled:M.value==="put"},null,8,["modelValue","error","name","disabled"]),e("div",jt,[e("button",{type:"button",onClick:y[2]||(y[2]=R(g=>h.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},t(d.$t("Cancel")),1),e("button",{class:N(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":x(r).processing}]),disabled:x(r).processing},[x(r).processing?(n(),c("svg",Ot,It)):(n(),c("span",Pt,t(d.$t("Save")),1))],10,Mt)])],32)])]),_:1},8,["label","isOpen"])]),_:1}))}};export{ds as default};
