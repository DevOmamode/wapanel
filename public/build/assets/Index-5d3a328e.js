import{_ as j}from"./App-93f94ba2.js";import{o as n,c as u,h as t,f as s,g as l,t as o,F as x,d as L,e as k,n as C,a,u as b,b as y,i as A,k as N,x as T,r as D,O as F}from"./app-03263d9c.js";import{_ as M}from"./AlertModal-543f4e13.js";import{u as R}from"./useAlertModal-bfc81e51.js";import{l as Z}from"./index-dc901c6e.js";/* empty css              */import{_ as E}from"./Table-992b3240.js";import{T as H,a as S,_ as f}from"./TableHeaderRowItem-d69b56f6.js";import{T as z,a as P,_ as h}from"./TableBodyRowItem-4927bcdc.js";import{_ as I}from"./Dropdown-9630f924.js";import{_ as J,a as $}from"./DropdownItem-2e9b2b3e.js";import"./Sidebar-0e13a0ad.js";import"./Menu-009aab99.js";import"./Modal-d968cb5e.js";import"./transition-2742b54b.js";import"./hidden-d73b7354.js";import"./use-text-value-74ca2016.js";import"./micro-task-89dcd6af.js";import"./ProfileModal-89ff529e.js";import"./FormInput-bb9f5607.js";import"./FormPhoneInput-429004f0.js";/* empty css                      */import"./FormSelect-34d68940.js";import"./index-17bda2d1.js";import"./tabs-7065b218.js";import"./LangToggle-fadca48b.js";import"./MobileSidebar-ac141bfc.js";import"./pusher-772b6102.js";import"./Pagination-0f108323.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-tree-walker-07a95138.js";const U={class:"py-1 px-2 bg-gray-50 rounded-[5px] border border-dashed w-[20em] truncate text-xs"},Y={key:0,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ebfdf4] text-[#38733f]"},q={key:1,class:"py-1 rounded-[5px] text-xs px-3 bg-[#fae6e6] text-[darkred]"},G={key:2,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ddebf7] text-slate-700"},K=a("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[a("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1),Q={key:0,class:"bg-white rounded-xl"},W={class:"p-4 py-8"},X=a("div",{class:"flex justify-center mb-4"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 32 32"},[a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"2",d:"M12 15h8m-8 4h8m8 5V11c0-1.105-.892-2-1.997-2H17c-2 0-2-3-5-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2Z"})])],-1),ee={class:"text-center text-lg font-medium mb-4"},te={class:"flex justify-center"},se={key:0},ae={__name:"TemplateTable",props:{rows:{type:Object,required:!0}},emits:["delete"],setup(m,{emit:g}){const r=m,{isOpenAlert:_,openAlert:c,confirmAlert:v}=R(),B=async e=>{try{const d=await T.delete(`/templates/${e}`);if(d.status===200&&d.data.success){const i=r.rows.data.findIndex(p=>p.uuid===e);r.rows.data.splice(i,1)}Z(d.data.message,{autoClose:3e3})}catch{}},V=e=>e===r.rows.data.length-1,w=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),O=e=>{const i=JSON.parse(e).components.find(p=>p.type==="BODY");return i?i.text:"N/A"};return(e,d)=>(n(),u(x,null,[t(E,{rows:m.rows},{default:s(()=>[t(H,null,{default:s(()=>[t(S,null,{default:s(()=>[t(f,{position:"first"},{default:s(()=>[l(o(e.$t("Name")),1)]),_:1}),t(f,null,{default:s(()=>[l(o(e.$t("Category")),1)]),_:1}),t(f,null,{default:s(()=>[l(o(e.$t("Preview")),1)]),_:1}),t(f,null,{default:s(()=>[l(o(e.$t("Status")),1)]),_:1}),t(f,null,{default:s(()=>[l(o(e.$t("Last updated")),1)]),_:1}),t(f,{position:"last"})]),_:1})]),_:1}),t(z,null,{default:s(()=>[(n(!0),u(x,null,L(m.rows.data,(i,p)=>(n(),k(P,{key:p,class:C(V(p)?"":"border-b")},{default:s(()=>[t(h,{position:"first"},{default:s(()=>[l(o(i.name),1)]),_:2},1024),t(h,{class:"hidden sm:table-cell"},{default:s(()=>[l(o(w(i.category)),1)]),_:2},1024),t(h,{class:"hidden sm:table-cell"},{default:s(()=>[a("div",U,o(O(i.metadata)),1)]),_:2},1024),t(h,null,{default:s(()=>[i.status=="APPROVED"?(n(),u("span",Y,o(e.$t(w(i.status))),1)):i.status=="REJECTED"?(n(),u("span",q,o(e.$t(w(i.status))),1)):(n(),u("span",G,o(e.$t(w(i.status))),1))]),_:2},1024),t(h,{class:"hidden sm:table-cell"},{default:s(()=>[l(o(i.updated_at),1)]),_:2},1024),t(h,{position:"last"},{default:s(()=>[t(I,{align:"right",class:"mt-2"},{items:s(()=>[t(J,null,{default:s(()=>[t($,{href:"/templates/"+i.uuid},{default:s(()=>[l(o(e.$t("edit")),1)]),_:2},1032,["href"]),t($,{as:"button",onClick:_e=>b(c)(i.uuid)},{default:s(()=>[l(o(e.$t("Delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:s(()=>[K]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["rows"]),m.rows.data.length==0?(n(),u("div",Q,[a("div",W,[X,a("h3",ee,o(e.$t("You don't have any templates")),1),a("div",te,[t(b(A),{href:"/templates/create",class:"rounded-md px-3 py-2 text-sm hover:shadow-md text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 bg-primary",disabled:e.isLoading},{default:s(()=>[e.isLoading?y("",!0):(n(),u("span",se,o(e.$t("Create template")),1))]),_:1},8,["disabled"])])])])):y("",!0),t(M,{modelValue:b(_),"onUpdate:modelValue":d[0]||(d[0]=i=>N(_)?_.value=i:null),onConfirm:d[1]||(d[1]=()=>b(v)(B)),label:e.$t("Delete row"),description:e.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}},oe={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll capitalize"},ie={class:"flex justify-between mt-8 md:mt-0"},le={class:"text-xl mb-1"},ne={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},re=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),de={class:"ml-1 mt-1"},ue={class:"space-x-2 flex items-center"},ce=["disabled"],me={key:0},pe={key:1,class:"text-slate-600 animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},fe=a("path",{fill:"currentColor",d:"M18.43 4.25a.76.76 0 0 0-.75.75v2.43l-.84-.84a7.24 7.24 0 0 0-12 2.78a.74.74 0 0 0 .46 1a.73.73 0 0 0 .25 0a.76.76 0 0 0 .71-.51a5.63 5.63 0 0 1 1.37-2.2a5.76 5.76 0 0 1 8.13 0l.84.84h-2.41a.75.75 0 0 0 0 1.5h4.24a.74.74 0 0 0 .75-.75V5a.75.75 0 0 0-.75-.75Zm.25 9.43a.76.76 0 0 0-1 .47a5.63 5.63 0 0 1-1.37 2.2a5.76 5.76 0 0 1-8.13 0l-.84-.84h2.47a.75.75 0 0 0 0-1.5H5.57a.74.74 0 0 0-.75.75V19a.75.75 0 0 0 1.5 0v-2.43l.84.84a7.24 7.24 0 0 0 12-2.78a.74.74 0 0 0-.48-.95Z"},null,-1),he=[fe],qe={__name:"Index",props:{rows:Object},setup(m){const g=m,r=D(!1),_=()=>{r.value=!0,T.get("/templates/sync").then(function(c){F.reload(),setTimeout(()=>{r.value=!1},1500)}).catch(function(c){r.value=!1})};return(c,v)=>(n(),k(j,null,{default:s(()=>[a("div",oe,[a("div",ie,[a("div",null,[a("h2",le,o(c.$t("Message templates")),1),a("p",ne,[re,a("span",de,o(c.$t("Add template")),1)])]),a("div",ue,[a("button",{onClick:_,class:C(["rounded-md px-3 py-2 text-sm text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 capitalize",r.value?"bg-gray-200":"bg-indigo-600 hover:bg-indigo-500 shadow-sm"]),disabled:r.value},[r.value?(n(),u("svg",pe,he)):(n(),u("span",me,o(c.$t("Sync templates")),1))],10,ce),t(b(A),{href:"/templates/create",class:"md:block hidden rounded-md bg-indigo-600 px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:s(()=>[l(o(c.$t("Create template")),1)]),_:1})])]),t(ae,{rows:g.rows},null,8,["rows"])])]),_:1}))}};export{qe as default};
