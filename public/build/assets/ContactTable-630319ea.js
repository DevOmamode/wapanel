import{r as C,m as se,o,c as r,a as e,t as n,n as S,h as b,f as k,u as p,k as Z,b as g,F as N,d as E,e as B,G as me,j as V,g as M,K as he,O as P,q as le,R as ve,T as ge,a7 as be,S as ye,w as we,v as xe,i as J,l as _e}from"./app-03263d9c.js";import{d as ke}from"./debounce-51e60686.js";import{_ as ae}from"./Modal-d968cb5e.js";import{t as T}from"./index-17bda2d1.js";import{r as Ce,a as $e}from"./FormSelect-34d68940.js";import{Q as Le,G as Se,X as De,Y as Me,J as Ie}from"./combobox-7fa0f0b0.js";import{S as je}from"./transition-2742b54b.js";import{_ as Oe}from"./Dropdown-9630f924.js";import{_ as Ae,a as A}from"./DropdownItem-2e9b2b3e.js";import{P as Ve}from"./Pagination-0f108323.js";import{_ as Ne}from"./AlertModal-543f4e13.js";import{u as Be}from"./useAlertModal-bfc81e51.js";const Fe={class:"w-full"},Ze={class:"relative mt-1"},Te={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},Ee={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},oe={__name:"MultiSelectComboBox",props:["allData","type","selectedData","name","position"],emits:["contactListDataForward"],setup(c,{emit:j}){const v=c,I=j,y=v.allData;let l=v.selectedData?C(v.allData.filter(u=>v.selectedData.includes(u.id))):C([]),d=C(""),D=se(()=>d.value===""?y:y.filter(u=>(v.type=="allContactLabels"?u.name:u.full_name).toLowerCase().replace(/\s+/g,"").includes(d.value.toLowerCase().replace(/\s+/g,"")))),_=u=>{if(u.length)return u.length==1?v.type=="allContactLabels"?u[0].name:u[0].full_name:u.reduce((f,i)=>((v.type=="allContactLabels"?f.name:f.full_name)??f)+", "+((v.type=="allContactLabels"?i.name:i.full_name)??i))};const w=u=>{I("contactListDataForward",u)};return(u,f)=>(o(),r("div",Fe,[e("label",{for:"name",class:S(["block text-sm leading-6 text-gray-900",u.labelClass])},n(u.label??c.name),3),b(p(Ie),{modelValue:p(l),"onUpdate:modelValue":[f[2]||(f[2]=i=>Z(l)?l.value=i:l=i),f[3]||(f[3]=i=>w(p(l)))],multiple:""},{default:k(()=>[e("div",Ze,[e("div",Te,[b(p(Le),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:i=>p(_)(i),onChange:f[0]||(f[0]=i=>Z(d)?d.value=i.target.value:d=i.target.value)},null,8,["displayValue"]),b(p(Se),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:k(()=>[b(p(Ce),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),b(p(je),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:f[1]||(f[1]=i=>Z(d)?d.value="":d="")},{default:k(()=>[b(p(De),{class:S(["mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",[c.position?"":"absolute"]])},{default:k(()=>[p(D).length===0&&p(d)!==""?(o(),r("div",Ee," Nothing found. ")):g("",!0),(o(!0),r(N,null,E(p(D),i=>(o(),B(p(Me),{as:"template",key:i.id,value:i},{default:k(({selected:$,active:L})=>[e("li",{class:S(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":L,"text-gray-900":!L}])},[e("span",{class:S(["block truncate",{"font-medium":$,"font-normal":!$}])},n(v.type=="allContactLabels"?i.name:i.full_name),3),$?(o(),r("span",{key:0,class:S(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":L,"text-teal-600":!L}])},[b(p($e),{class:"h-5 w-5","aria-hidden":"true"})],2)):g("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1},8,["class"])]),_:1})])]),_:1},8,["modelValue"])]))}},Ue={key:0,class:"text-sm text-slate-600"},ze={key:1,class:"text-sm text-slate-600"},Ge={class:"text-sm text-slate-600 underline flex mt-4 mb-6"},Je=["href"],Pe={class:"max-w-md w-full gap-y-8"},Xe={class:"space-y-6"},qe={type:"file",class:"sr-only",accept:".csv,.xlsx",ref:"fileInput",id:"file-upload"},Re={class:"text-center"},We=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("g",{fill:"none"},[e("path",{fill:"currentColor",d:"m15.393 4.054l-.502.557l.502-.557Zm3.959 3.563l-.502.557l.502-.557Zm2.302 2.537l-.685.305l.685-.305ZM3.172 20.828l.53-.53l-.53.53Zm17.656 0l-.53-.53l.53.53ZM14 21.25h-4v1.5h4v-1.5ZM2.75 14v-4h-1.5v4h2.5Zm18.5-.437V14h2.5v-.437h-1.5ZM14.891 4.61l3.959 3.563l1.003-1.115l-3.958-3.563l-1.004 1.115Zm7.859 8.952c0-1.689.015-2.758-.41-3.714l-1.371.61c.266.598.281 1.283.281 3.104h2.5Zm-3.9-5.389c1.353 1.218 1.853 1.688 2.119 2.285l1.37-.61c-.426-.957-1.23-1.66-2.486-2.79L18.85 8.174ZM10.03 2.75c1.582 0 2.179.012 2.71.216l.538-1.4c-.852-.328-1.78-.316-3.248-.316v1.5Zm5.865.746c-1.086-.977-1.765-1.604-2.617-1.93l-.537 1.4c.532.204.98.592 2.15 1.645l1.004-1.115ZM10 21.25c-1.907 0-3.261-.002-4.29-.14c-1.005-.135-1.585-.389-2.008-.812l-1.06 1.06c.748.75 1.697 1.081 2.869 1.239c1.15.155 2.625.153 4.489.153v-1.5ZM1.25 14c0 1.864-.002 3.338.153 4.489c.158 1.172.49 2.121 1.238 2.87l1.06-1.06c-.422-.424-.676-1.004-.811-2.01c-.138-1.027-.14-2.382-.14-4.289h-1.5ZM14 22.75c1.864 0 3.338.002 4.489-.153c1.172-.158 2.121-.49 2.87-1.238l-1.06-1.06c-.424.422-1.004.676-2.01.811c-1.027.138-2.382.14-4.289.14v1.5ZM21.25 14c0 1.907-.002 3.262-.14 4.29c-.135 1.005-.389 1.585-.812 2.008l1.06 1.06c.75-.748 1.081-1.697 1.239-2.869c.155-1.15.153-2.625.153-4.489h-1.5Zm-18.5-4c0-1.907.002-3.261.14-4.29c.135-1.005.389-1.585.812-2.008l-1.06-1.06c-.75.748-1.081 1.697-1.239 2.869C1.248 6.661 1.25 8.136 1.25 10h2.5Zm7.28-8.75c-1.875 0-3.356-.002-4.511.153c-1.177.158-2.129.49-2.878 1.238l1.06 1.06c.424-.422 1.005-.676 2.017-.811c1.033-.138 2.395-.14 4.312-.14v-1.5Z"}),e("path",{stroke:"currentColor","stroke-width":"1.5",d:"M13 2.5V5c0 2.357 0 3.536.732 4.268C14.464 10 15.643 10 18 10h4"})])],-1),Qe={class:"flex text-sm text-gray-600"},Ye={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},Ke={class:"pl-1"},He={class:"text-xs text-gray-500"},et={key:2,class:"flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},tt=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"black","stroke-dasharray":"15","stroke-dashoffset":"15","stroke-linecap":"round","stroke-width":"2",d:"M12 3C16.9706 3 21 7.02944 21 12"},[e("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.3s",values:"15;0"}),e("animateTransform",{attributeName:"transform",dur:"1.5s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})])],-1),st=e("div",{class:"text-center mb-2 text-sm text-gray-500"},"Upload In Progress",-1),lt={class:"rounded-md p-1 bg-slate-50 text-center text-sm"},at={class:"mt-4"},ot={key:0,class:"mt-2"},nt={key:0,class:"bg-green-50 px-2 py-2 flex rounded-md justify-between items-center mb-1"},rt={class:"mt-1 text-sm"},it={class:"text-green-800 flex items-center gap-x-2"},ct=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[e("path",{d:"M14.25 8.75c-.5 2.5-2.385 4.854-5.03 5.38A6.25 6.25 0 0 1 3.373 3.798C5.187 1.8 8.25 1.25 10.75 2.25"}),e("path",{d:"m5.75 7.75l2.5 2.5l6-6.5"})])],-1),dt={key:1,class:"bg-red-50 px-2 py-2 flex rounded-md justify-between items-center mb-1"},ut={class:"mt-1 text-sm"},pt={class:"text-red-600 flex items-center gap-x-2"},ft=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M15.71 8.29a1 1 0 0 0-1.42 0L12 10.59l-2.29-2.3a1 1 0 0 0-1.42 1.42l2.3 2.29l-2.3 2.29a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l2.29-2.3l2.29 2.3a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42L13.41 12l2.3-2.29a1 1 0 0 0 0-1.42m3.36-3.36A10 10 0 1 0 4.93 19.07A10 10 0 1 0 19.07 4.93m-1.41 12.73A8 8 0 1 1 20 12a7.95 7.95 0 0 1-2.34 5.66"})],-1),mt={key:2,class:"bg-red-50 px-2 py-2 flex rounded-md justify-between items-center mb-1"},ht={class:"mt-1 text-sm"},vt={class:"text-red-600 flex items-center gap-x-2"},gt=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M15.71 8.29a1 1 0 0 0-1.42 0L12 10.59l-2.29-2.3a1 1 0 0 0-1.42 1.42l2.3 2.29l-2.3 2.29a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l2.29-2.3l2.29 2.3a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42L13.41 12l2.3-2.29a1 1 0 0 0 0-1.42m3.36-3.36A10 10 0 1 0 4.93 19.07A10 10 0 1 0 19.07 4.93m-1.41 12.73A8 8 0 1 1 20 12a7.95 7.95 0 0 1-2.34 5.66"})],-1),bt={key:3,class:"bg-red-50 px-2 py-2 flex rounded-md justify-between items-center mb-1"},yt={class:"mt-1 text-sm"},wt={class:"text-red-600 flex items-center gap-x-2"},xt=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M15.71 8.29a1 1 0 0 0-1.42 0L12 10.59l-2.29-2.3a1 1 0 0 0-1.42 1.42l2.3 2.29l-2.3 2.29a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l2.29-2.3l2.29 2.3a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42L13.41 12l2.3-2.29a1 1 0 0 0 0-1.42m3.36-3.36A10 10 0 1 0 4.93 19.07A10 10 0 1 0 19.07 4.93m-1.41 12.73A8 8 0 1 1 20 12a7.95 7.95 0 0 1-2.34 5.66"})],-1),_t={key:2,class:"mt-5"},kt={class:"flex justify-center gap-4 mt-2 w-full"},Ct={__name:"ContactImportModal",props:["type","modelValue","allContactLabels","contactLabelIds"],emits:["update:modelValue"],setup(c,{emit:j}){const v=c,I=j,y=se(()=>he().props.flash.status),l=v.type==="contact"?T("Import contacts"):T("Import contact groups"),d=C(v.modelValue),D=C(null),_=C(null),w=C([]);me(()=>v.modelValue,m=>{d.value=m});const u=()=>{const m=document.getElementById("file-upload").files[0];i(m)},f=m=>{m.preventDefault();const x=m.dataTransfer.files[0];i(x)};function i(m){if(!["text/csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(m.type)){alert(T("please select a CSV or XLSX file"));return}D.value=m.name;const x=new FormData;x.append("file",m),x.append("selectedContactLabelIds",JSON.stringify(w.value)),P.post(v.type==="contact"?"/contacts/import":"/contact-groups/import",x,{forceFormData:!0,onProgress:h=>{_.value="pending"},onSuccess:()=>{_.value="complete"},onError:h=>{_.value=null}})}function $(){d.value=!1,I("update:modelValue",!1),setTimeout(()=>{_.value=null},500)}const L=m=>{w.value=[],m.forEach(x=>{w.value.push(x.id)}),console.log(w.value)};return(m,x)=>(o(),B(ae,{label:p(l),isOpen:d.value},{default:k(()=>[c.type==="contact"?(o(),r("div",Ue,n(m.$t("Upload a csv/xlsx to import your contact data. For the phone field ensure that you start with the contact's country code.")),1)):(o(),r("div",ze,n(m.$t("Upload a csv/xlsx to import your contact groups data.")),1)),e("div",Ge,[e("a",{href:c.type==="contact"?"/contacts.xlsx":"/contact-groups.xlsx"},n(m.$t("Click here to download sample template")),9,Je)]),e("div",Pe,[e("div",Xe,[c.type==="contact"?(o(),B(oe,{key:0,allData:v.allContactLabels,name:m.$t("Label"),type:"allContactLabels",selectedData:c.contactLabelIds,onContactListDataForward:L,position:!0},null,8,["allData","name","selectedData"])):g("",!0),_.value==null||_.value=="complete"?(o(),r("div",{key:1,onDragover:x[0]||(x[0]=V(()=>{},["prevent"])),onDrop:f,class:"flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},[e("input",qe,null,512),e("div",Re,[e("div",null,[We,e("div",Qe,[e("label",Ye,[e("span",null,n(m.$t("Click to upload a file")),1)]),e("p",Ke,n(m.$t("Or drag and drop")),1)]),e("p",He,n(m.$t("CSV/XLSX files only")),1)])])],32)):(o(),r("div",et,[e("div",null,[tt,st,e("div",lt,n(D.value),1)])])),e("div",at,[_.value=="complete"?(o(),r("div",ot,[y.value.successfulImports?(o(),r("div",nt,[e("div",rt,[e("div",it,[ct,M(" "+n(y.value.successfulImports+"/"+y.value.totalImports)+" "+n(m.$t("rows added successfully!")),1)])])])):g("",!0),y.value.failedNames?(o(),r("div",dt,[e("div",ut,[e("div",pt,[ft,M(" "+n(y.value.failedNames)+" rows without first name ",1)])])])):g("",!0),y.value.failedDuplicates?(o(),r("div",mt,[e("div",ht,[e("div",vt,[gt,M(" "+n(y.value.failedDuplicates)+" duplicates found ",1)])])])):g("",!0),y.value.failedFormats?(o(),r("div",bt,[e("div",yt,[e("div",wt,[xt,M(" "+n(y.value.failedFormats)+" formatting issues found ",1)])])])):g("",!0)])):g("",!0)])])]),_.value==null||_.value=="complete"?(o(),r("div",_t,[e("div",kt,[e("button",{type:"button",onClick:x[1]||(x[1]=h=>u()),class:"w-full inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white hover:text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},n(m.$t("Import")),1),e("button",{type:"button",onClick:x[2]||(x[2]=h=>$()),class:"w-full inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white hover:text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},n(m.$t("Close")),1)])])):g("",!0)]),_:1},8,["label","isOpen"]))}},$t={class:"relative text-sm"},Lt={class:"cursor-pointer flex items-center space-x-1 bg-slate-50 w-[fit-content] h-[fit-content] rounded-md p-1 px-2 text-sm"},St={class:"capitalize overflow-ellipsis overflow-hidden w-20",style:{"max-width":"fit-content","white-space":"nowrap"}},Dt={class:"text-slate-500"},Mt=e("span",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16.53 8.97a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06L12 12.44l3.47-3.47a.75.75 0 0 1 1.06 0","clip-rule":"evenodd"})])],-1),It={key:0,class:"absolute bg-white z-10 px-1 w-full py-2 shadow rounded-md text-black",style:{"max-width":"max-content"}},jt=["onClick"],Ot={__name:"LabelStatusToggle",props:{rows:Object,languages:Object,currentLanguage:String,status:String,rowCount:Number,filters:Object},emits:["status"],setup(c,{emit:j}){const v=c,I=j,y=C(!1),l=()=>{y.value=!y.value},d=w=>{y.value&&!w.target.closest(".status-dd")&&(y.value=!1)},D=w=>w?w.charAt(0).toUpperCase()+w.slice(1):"",_=w=>{I("status",w)};return le(()=>{document.body.addEventListener("click",d)}),ve(()=>{document.body.removeEventListener("click",d)}),(w,u)=>(o(),r("div",$t,[e("div",{onClick:u[0]||(u[0]=f=>l()),class:"status-dd"},[e("div",Lt,[e("span",St,n(w.$t(D(v.status))),1),e("span",Dt,n(v.rowCount),1),Mt])]),y.value?(o(),r("div",It,[e("div",null,[(o(!0),r(N,null,E(c.rows,f=>(o(),r("div",{onClick:i=>_(f.name),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md overflow-ellipsis overflow-hidden w-24",style:{"white-space":"nowrap"}},n(w.$t(f.name)),9,jt))),256)),e("div",{onClick:u[1]||(u[1]=f=>_("all")),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md overflow-ellipsis overflow-hidden w-24",style:{"white-space":"nowrap"}},n(w.$t("All")),1)])])):g("",!0)]))}},At={class:"px-4 pb-2"},Vt={class:"border border-[#f0f2f5] rounded-md mt-6 flex items-center py-[2px] md:py-[2px]"},Nt=e("span",{class:"pl-3 py-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m15 15l6 6m-11-4a7 7 0 1 1 0-14a7 7 0 0 1 0 14Z"})])],-1),Bt=["placeholder"],Ft=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1),Zt=[Ft],Tt={key:1,class:"pr-2"},Et=_e('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1),Ut=[Et],zt={class:"flex justify-between px-4 border-b"},Gt={class:"flex items-center space-x-2"},Jt={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Pt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),Xt=[Pt],qt={key:0},Rt={key:1},Wt={class:"flex items-center"},Qt={key:0},Yt={class:"float-right"},Kt=e("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hbg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[e("span",{class:"hover:shadow-md bg-slate-50 rounded-full w-[fit-content] p-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16"},[e("path",{fill:"black",d:"M8 2.5a1.22 1.22 0 0 1 1.25 1.17A1.21 1.21 0 0 1 8 4.84a1.21 1.21 0 0 1-1.25-1.17A1.22 1.22 0 0 1 8 2.5m0 8.66a1.17 1.17 0 1 1-1.25 1.17A1.21 1.21 0 0 1 8 11.16m0-4.33a1.17 1.17 0 1 1 0 2.34a1.17 1.17 0 1 1 0-2.34"})])])],-1),Ht=["href"],es={class:"h-[5vh]"},ts={class:"flex justify-between text-sm border-b"},ss={class:"flex-grow overflow-y-auto h-[65vh]",ref:"scrollContainer"},ls=["onClick"],as=["onClick"],os={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ns=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),rs=[ns],is={class:"w-[15%]"},cs=["src"],ds={key:1,class:"rounded-full bg-secondary/10 text-secondary flex justify-center items-center h-12 w-12"},us={class:"w-[75%]"},ps={class:"text-slate-500 text-xs truncate"},fs={class:"w-[10%]"},ms={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},hs=e("path",{fill:"#FFD700",d:"M9.153 5.408C10.42 3.136 11.053 2 12 2c.947 0 1.58 1.136 2.847 3.408l.328.588c.36.646.54.969.82 1.182c.28.213.63.292 1.33.45l.636.144c2.46.557 3.689.835 3.982 1.776c.292.94-.546 1.921-2.223 3.882l-.434.507c-.476.557-.715.836-.822 1.18c-.107.345-.071.717.001 1.46l.066.677c.253 2.617.38 3.925-.386 4.506c-.766.582-1.918.051-4.22-1.009l-.597-.274c-.654-.302-.981-.452-1.328-.452c-.347 0-.674.15-1.328.452l-.596.274c-2.303 1.06-3.455 1.59-4.22 1.01c-.767-.582-.64-1.89-.387-4.507l.066-.676c.072-.744.108-1.116 0-1.46c-.106-.345-.345-.624-.821-1.18l-.434-.508c-1.677-1.96-2.515-2.941-2.223-3.882c.293-.941 1.523-1.22 3.983-1.776l.636-.144c.699-.158 1.048-.237 1.329-.45c.28-.213.46-.536.82-1.182z"},null,-1),vs=[hs],gs=["onClick"],bs=["onClick"],ys={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ws=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),xs=[ws],_s={class:"w-[15%]"},ks={class:"rounded-full bg-secondary/10 text-secondary flex justify-center items-center h-12 w-12 capitalize"},Cs={class:"w-[85%] flex items-center"},$s={class:"px-4 pb-4"},Ls={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},Ss={key:0,class:"form-error text-[#b91c1c] text-xs"},Ds={class:"mt-4 flex"},Ms=["disabled"],Is={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},js=e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Os=e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),As=[js,Os],Vs={key:1},qs={__name:"ContactTable",props:["rows","filters","type","allContactLabels","contactLabelIds","labelState","rowCount"],emits:["callback"],setup(c,{emit:j}){var K,H,ee,te;const{isOpenAlert:v,openAlert:I,confirmAlert:y}=Be(),l=c,d=C({id:(K=l.filters)==null?void 0:K.id,search:(H=l.filters)==null?void 0:H.search,page:(ee=l.filters)==null?void 0:ee.page,status:(te=l.filters)==null?void 0:te.status}),D=C(!1),_=C(!1),w=j,u=C(!1),f=C(0),i=C([]),$=C([]),L=C([]),m=T("Assign labels"),x=C(!1),h=ge({selectedContacts:i,selectedLabels:C([]),processing:!1});function X(t){d.value.id=t;const a=Object.fromEntries(Object.entries(d.value).filter(([s,O])=>O!==null));w("callback",a)}const ne=()=>{d.value.search=null,U()},q=ke(()=>{d.value.page=null,_.value=!0,U()},1e3),U=()=>{const t=Object.fromEntries(Object.entries(d.value).filter(([a,s])=>s!==null));P.visit(l.type==="contact"?"/contacts":l.type==="group"?"/contact-groups":"/contact-labels",{method:"get",data:t})};function re(){l.type==="contact"?localStorage.setItem("checkedContacts",JSON.stringify(i.value)):l.type==="group"?localStorage.setItem("checkedGroups",JSON.stringify($.value)):localStorage.setItem("checkedLabels",JSON.stringify($.value))}function ie(){if(l.type==="contact"){const t=localStorage.getItem("checkedContacts");i.value=t?JSON.parse(t):[]}else if(l.type==="group"){const t=localStorage.getItem("checkedGroups");$.value=t?JSON.parse(t):[]}else{const t=localStorage.getItem("checkedLabels");L.value=t?JSON.parse(t):[]}}function R(t,a){if(l.type==="contact"){const s=i.value.indexOf(t);a&&s===-1?i.value.push(t):!a&&s!==-1&&i.value.splice(s,1)}else if(l.type==="group"){const s=$.value.indexOf(t);a&&s===-1?$.value.push(t):!a&&s!==-1&&$.value.splice(s,1)}else{const s=L.value.indexOf(t);a&&s===-1?L.value.push(t):!a&&s!==-1&&L.value.splice(s,1)}re()}function W(t){const a=l.rows.data.find(s=>s.uuid===t);a.isChecked=!a.isChecked,R(t,a.isChecked),Y(),G()}function Q(){u.value=!u.value,l.rows.data.forEach(t=>{t.isChecked=u.value,R(t.uuid,u.value)}),G()}function z(){l.rows.data.forEach(t=>{t.isChecked=l.type==="contact"?i.value.includes(t.uuid):l.type==="group"?$.value.includes(t.uuid):L.value.includes(t.uuid)}),Y(),G()}function Y(){u.value=l.rows.data.length>0&&l.rows.data.every(t=>t.isChecked)}function G(){f.value=l.type==="contact"?i.value.length:l.type==="group"?$.value.length:L.value.length}function ce(t){const a=l.type==="contact"?i.value:l.type==="group"?$.value:L.value;P.visit(l.type==="contact"?"/contacts":l.type==="group"?"/contact-groups":"/contact-labels",{method:"delete",data:{uuids:t==="all"?[]:a},preserveState:!0,onSuccess:()=>{localStorage.removeItem(l.type==="contact"?"checkedContacts":l.type==="group"?"checkedGroups":"checkedLabels"),l.type==="contact"?i.value=[]:l.type==="group"?$.value=[]:L.value=[]}})}const de=t=>{h.selectedLabels=[],t.forEach(a=>{h.selectedLabels.push(a.id)})},ue=async()=>{if(h.processing=!0,h.selectedLabels.length||(h.errors.content="Label Field is required",h.processing=!1),h.selectedContacts=i,h.selectedContacts.length||(h.errors.content="Contact Field is required",h.processing=!1),!h.selectedLabels.length||!h.selectedContacts.length)return!1;h.errors.content="",h.post("/contact-labels/bulk_contact/store",{onFinish:()=>{h.processing=!1,x.value=!1}})},pe=t=>{!d.value.status||d.value.status=="all"||t=="all"?d.value.status=t:!d.value.status.split(",").filter(a=>a==t).length&&t!="all"&&(d.value.status+=`,${t}`),U()};return le(()=>{ie(),z()}),be(()=>{z()}),ye(()=>{var t;d.value.page=(t=l.filters)==null?void 0:t.page,z()}),(t,a)=>(o(),r(N,null,[e("div",At,[e("div",Vt,[Nt,we(e("input",{onInput:a[0]||(a[0]=(...s)=>p(q)&&p(q)(...s)),"onUpdate:modelValue":a[1]||(a[1]=s=>d.value.search=s),type:"text",class:"w-full outline-none rounded-xl py-2 pl-2 mr-2 text-sm",placeholder:c.type==="contact"?t.$t("Search name or phone or email"):t.$t("Search name")},null,40,Bt),[[xe,d.value.search]]),_.value===!1&&d.value.search?(o(),r("button",{key:0,onClick:ne,type:"button",class:"pr-2"},Zt)):g("",!0),_.value?(o(),r("span",Tt,Ut)):g("",!0)])]),e("div",zt,[e("div",Gt,[e("label",{onClick:a[2]||(a[2]=s=>Q()),for:"myCheckbox",class:"cursor-pointer"},[e("div",{class:S(["w-4 h-4 border border-gray-400 rounded-md flex items-center justify-center",{"bg-secondary":u.value}])},[u.value?(o(),r("svg",Jt,Xt)):g("",!0)],2)]),e("label",{onClick:a[3]||(a[3]=s=>Q()),class:"cursor-pointer text-sm"},[f.value==0?(o(),r("span",qt,n(t.$t("Select all"))+" ("+n(f.value)+")",1)):f.value>0?(o(),r("span",Rt,n(f.value)+" "+n(t.$t("selected")),1)):g("",!0)])]),e("div",Wt,[l.type==="contact"?(o(),r("div",Qt,[b(Ot,{rows:c.allContactLabels,filters:c.filters,status:c.labelState,rowCount:c.rowCount,onStatus:pe},null,8,["rows","filters","status","rowCount"])])):g("",!0),e("div",Yt,[b(Oe,{align:"right",class:"mt-2"},{items:k(()=>[b(Ae,null,{default:k(()=>[b(A,{as:"button",onClick:a[4]||(a[4]=s=>D.value=!0)},{default:k(()=>[M(n(t.$t("Import rows")),1)]),_:1}),b(A,{as:"button"},{default:k(()=>[e("a",{href:c.type==="contact"?"/contacts/export":c.type==="group"?"/contact-groups/export":"/contact-labels/export",class:"w-full h-full"},n(t.$t("Export to xlsx")),9,Ht)]),_:1}),c.type==="contact"&&c.allContactLabels.length?(o(),B(A,{key:0,as:"button",onClick:a[5]||(a[5]=s=>{x.value=!0})},{default:k(()=>[M(n(t.$t("Assign labels")),1)]),_:1})):g("",!0),f.value>0?(o(),B(A,{key:1,as:"button",onClick:a[6]||(a[6]=s=>p(I)())},{default:k(()=>[M(n(t.$t("Delete selected")),1)]),_:1})):g("",!0),b(A,{as:"button",onClick:a[7]||(a[7]=s=>p(I)("all"))},{default:k(()=>[M(n(t.$t("Delete all")),1)]),_:1})]),_:1})]),default:k(()=>[Kt]),_:1})])])]),e("div",es,[e("div",ts,[b(p(J),{href:"/contacts",class:S(["pt-3 w-1/2 text-center pb-1 hover:bg-slate-50",{"bg-gray-50 border-b-2 border-slate-700":t.$page.url.startsWith("/contacts")}])},{default:k(()=>[M(n(t.$t("Contacts")),1)]),_:1},8,["class"]),b(p(J),{href:"/contact-groups",class:S(["pt-3 w-1/2 text-center pb-1 hover:bg-slate-50",{"bg-gray-50 border-b-2 border-slate-700":t.$page.url.startsWith("/contact-groups")}])},{default:k(()=>[M(n(t.$t("Groups")),1)]),_:1},8,["class"]),b(p(J),{href:"/contact-labels",class:S(["pt-3 w-1/2 text-center pb-1 hover:bg-slate-50",{"bg-gray-50 border-b-2 border-slate-700":t.$page.url.startsWith("/contact-labels")}])},{default:k(()=>[M(n(t.$t("Labels")),1)]),_:1},8,["class"])])]),e("div",ss,[c.type==="contact"?(o(!0),r(N,{key:0},E(c.rows.data,(s,O)=>{var F;return o(),r("div",{onClick:fe=>X(s.uuid),class:S(["flex space-x-2 hover:bg-gray-50 cursor-pointer px-4 py-3 border-b",s.isChecked?"bg-gray-50":""]),key:O},[e("div",null,[e("label",{onClick:V(fe=>W(s.uuid),["stop"]),for:"myCheckbox",class:"cursor-pointer"},[e("div",{class:S(["w-4 h-4 border border-gray-400 rounded-md flex items-center justify-center mt-1",{"bg-secondary":s.isChecked}])},[s.isChecked?(o(),r("svg",os,rs)):g("",!0)],2)],8,as)]),e("div",is,[s.avatar?(o(),r("img",{key:0,class:"rounded-full h-12 w-12",src:s.avatar},null,8,cs)):(o(),r("div",ds,n((F=s.first_name)==null?void 0:F.substring(0,1)),1))]),e("div",us,[e("h3",null,n(s==null?void 0:s.full_name),1),e("p",ps,n(s.formatted_phone_number),1)]),e("div",fs,[s.is_favorite?(o(),r("svg",ms,vs)):g("",!0)])],10,ls)}),128)):c.type==="group"||c.type==="label"?(o(!0),r(N,{key:1},E(c.rows.data,(s,O)=>(o(),r("div",{onClick:F=>X(s.uuid),class:S(["flex space-x-2 hover:bg-gray-50 cursor-pointer px-4 py-3 border-b",s.isChecked?"bg-gray-50":""]),key:O},[e("div",null,[e("label",{onClick:V(F=>W(s.uuid),["stop"]),for:"myCheckbox",class:"cursor-pointer"},[e("div",{class:S(["w-4 h-4 border border-gray-400 rounded-md flex items-center justify-center mt-1",{"bg-secondary":s.isChecked}])},[s.isChecked?(o(),r("svg",ys,xs)):g("",!0)],2)],8,bs)]),e("div",_s,[e("div",ks,n(s.name.substring(0,1)),1)]),e("div",Cs,[e("h3",null,n(s.name),1)])],10,gs))),128)):g("",!0)],512),e("div",$s,[b(Ve,{class:"mt-3",pagination:c.rows.meta},null,8,["pagination"])]),b(Ct,{type:c.type,modelValue:D.value,"onUpdate:modelValue":a[8]||(a[8]=s=>D.value=s),allContactLabels:c.allContactLabels,contactLabelIds:c.contactLabelIds},null,8,["type","modelValue","allContactLabels","contactLabelIds"]),b(ae,{label:p(m),isOpen:x.value},{default:k(()=>[e("div",Ls,[e("form",{onSubmit:a[10]||(a[10]=V(s=>ue(),["prevent"])),class:""},[b(oe,{allData:l.allContactLabels,name:t.$t("Label"),type:"allContactLabels",selectedData:c.contactLabelIds,onContactListDataForward:de,position:!0},null,8,["allData","name","selectedData"]),p(h).errors.content?(o(),r("div",Ss,n(p(h).errors.content),1)):g("",!0),e("div",Ds,[e("button",{type:"button",onClick:a[9]||(a[9]=V(s=>x.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},n(t.$t("Cancel")),1),e("button",{class:S(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":p(h).processing}]),disabled:p(h).processing},[p(h).processing?(o(),r("svg",Is,As)):(o(),r("span",Vs,n(t.$t("Save")),1))],10,Ms)])],32)])]),_:1},8,["label","isOpen"]),b(Ne,{modelValue:p(v),"onUpdate:modelValue":a[11]||(a[11]=s=>Z(v)?v.value=s:null),onConfirm:a[12]||(a[12]=()=>p(y)(ce)),label:t.$t("Delete "+(l.type==="contact"?"Contacts":l.type==="group"?"Groups":"Labels")),description:t.$t("Are you sure you want to delete the "+(l.type==="contact"?" contacts":l.type==="group"?"groups":"labels")+"? This action can not be undone")},null,8,["modelValue","label","description"])],64))}};export{Ct as _,qs as a,oe as b};
